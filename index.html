<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Walentynki â¤ï¸</title>
    <style>
        /* --- STYLE FINAÅOWEJ ANIMACJI --- */
#grand-finale-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: linear-gradient(135deg, #fff0f5 0%, #ffc0cb 100%); /* RÃ³Å¼owy gradient */
    z-index: 10000; /* Musi byÄ‡ na samym wierzchu */
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    animation: fadeInSlow 2s ease-in;
}

.finale-content {
    text-align: center;
}

/* Wielkie bijÄ…ce serce */
.beating-heart-giant {
    font-size: 150px;
    animation: heartbeatGiant 1.2s infinite cubic-bezier(0.215, 0.61, 0.355, 1);
}

@keyframes heartbeatGiant {
    0% { transform: scale(0.95); }
    5% { transform: scale(1.1); }
    39% { transform: scale(0.85); }
    45% { transform: scale(1); }
    60% { transform: scale(0.95); }
    100% { transform: scale(0.9); }
}

/* Kontener na kwiaty */
.flowers-delivery {
    margin-top: 50px;
    font-size: 80px;
    display: flex;
    justify-content: center;
    gap: 20px;
    overflow: hidden; /* Ukrywa kwiaty zanim wjadÄ… */
    padding: 20px;
}

/* Animacja pojedynczego kwiata */
.flowers-delivery span {
    display: inline-block;
    transform: translateY(200%); /* StartujÄ… poza ekranem (na dole) */
    opacity: 0;
    animation: flowerRise 1.5s forwards cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes flowerRise {
    0% {
        transform: translateY(100vh) rotate(-20deg); /* Start z doÅ‚u ekranu */
        opacity: 0;
    }
    100% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
    }
}

/* Tekst koÅ„cowy */
.finale-text {
    font-size: 2em;
    color: #d63384;
    opacity: 0;
    animation: fadeInSlow 2s ease-in 3s forwards; /* Pojawia siÄ™ po 3 sekundach */
}

@keyframes fadeInSlow {
    from { opacity: 0; }
    to { opacity: 1; }
}
        :root {
            --pink: #FF69B4;
            --dark: #222;
            --light: #FFF0F5;
            --gold: #FFD700;
            --green: #6aaa64;
            --orange: #c9b458;
            --gray: #787c7e;
            --red: #ff4d4d;
            --blue: #1e90ff;
        }
@keyframes fall {
    0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
}
.falling-heart {
    position: fixed;
    top: -50px;
    z-index: 9999;
    pointer-events: none;
    animation: fall linear forwards;
}
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light);
            color: var(--dark);
            margin: 0;
            padding: 10px;
            text-align: center;
            overflow-x: hidden;
            padding-bottom: 50px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        h1, h2, h3 { color: var(--pink); margin: 10px 0; }
        p { line-height: 1.5; }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid var(--pink);
            position: relative;
            min-height: 80vh;
        }
        #phase-match {
    animation: fadeIn 1s;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

        /* --- BUTTONS --- */
        button {
            background-color: var(--pink);
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            margin: 8px;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            user-select: none;
        }
        button:active { transform: scale(0.95); }
        button:disabled { background-color: #ccc; cursor: not-allowed; }
        
        .btn-game-select {
            width: 90%;
            padding: 15px;
            font-size: 1.1em;
            margin: 10px auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            color: var(--pink);
            border: 2px solid var(--pink);
            text-align: left;
        }
        
        .hidden { display: none !important; }
        img { max-width: 100%; border-radius: 10px; border: 3px solid var(--pink); }

        /* --- REASONS --- */
        #reason-display {
            min-height: 100px;
            padding: 15px;
            font-style: italic;
            margin: 10px;
            background: #fffafa;
            border: 1px dashed var(--pink);
            border-radius: 10px;
            font-size: 1em;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        #reason-count-badge { font-size: 0.8em; color: #999; margin-top: 5px; }

        /* --- TIMELINE --- */
       /* ZnajdÅº i zamieÅ„ te linie w swoim CSS */
.timeline-item { 
    border-left: 3px solid var(--pink); 
    padding-left: 15px; 
    margin: 20px 0; 
    text-align: left; 
    opacity: 0.3; /* Mocniej przyciemniamy to co nieaktywne */
    transition: opacity 0.5s; 
}

.timeline-item.active { 
    opacity: 1 !important; /* To sprawi, Å¼e sekcja bÄ™dzie jasna jak reszta strony */
}

/* Dodaj to, Å¼eby przyciski pod filmem byÅ‚y Å‚adnie wyÅ›rodkowane */
.timeline-item button {
    display: block;
    margin: 10px auto;
}

        /* --- GAME 1: MEMORY --- */
        .memory-grid { display: grid; gap: 8px; margin-top: 15px; perspective: 1000px; justify-content: center; }
        .grid-easy { grid-template-columns: repeat(2, 1fr); max-width: 300px; margin: 0 auto; }
        .grid-hard { grid-template-columns: repeat(3, 1fr); }
        .memory-card { height: 90px; position: relative; transform-style: preserve-3d; transition: transform 0.5s; }
        .memory-card.flipped { transform: rotateY(180deg); }
        .front, .back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 8px; border: 2px solid var(--pink); }
        .front { background: #ffc0cb; font-size: 24px; }
        .back { background: white; transform: rotateY(180deg); }
        .back img { width: 100%; height: 100%; object-fit: cover; border: none; border-radius: 6px; }

        /* --- GAME 2: CATCHER --- */
        #catcher-area { position: relative; width: 100%; height: 350px; background: #222; border-radius: 10px; overflow: hidden; margin-top: 10px; touch-action: none; }
        #basket { 
            position: absolute; bottom: 10px; left: 50%; 
            width: 90px; height: 45px; background: var(--pink); border-radius: 10px; 
            transform: translateX(-50%); display: flex; align-items: center; justify-content: center; 
            font-size: 24px; color: white; transition: width 0.3s; border: 2px solid white;
        }
        .falling-item { position: absolute; font-size: 28px; top: 0; }
        .controls { display: flex; justify-content: space-between; margin-top: 10px; }
        .controls button { width: 40%; padding: 20px; font-size: 20px; touch-action: none; }
        .skills-bar { display: flex; justify-content: center; gap: 10px; margin-top: 10px; }
        .skill-btn { width: 48%; font-size: 0.85em; padding: 10px; background: var(--blue); border: 2px solid #0056b3; color: white; }
        .skill-btn:disabled { opacity: 0.5; background: #555; border-color: #333; }

        /* --- GAME 3: WORDLE (MOBILE & DESKTOP) --- */
        #wordle-container { display: flex; flex-direction: column; align-items: center; margin-top: 10px; }
        .w-row { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; margin-bottom: 4px; }
        .w-box { width: 42px; height: 42px; border: 2px solid #ccc; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: bold; text-transform: uppercase; background: white; }
        .w-correct { background-color: var(--green) !important; color: white !important; border-color: var(--green) !important; }
        .w-present { background-color: var(--orange) !important; color: white !important; border-color: var(--orange) !important; }
        .w-absent { background-color: var(--gray) !important; color: white !important; border-color: var(--gray) !important; }
        
        #wordle-keyboard { margin-top: 15px; display: flex; flex-direction: column; align-items: center; gap: 4px; width: 100%; }
        .kb-row { display: flex; gap: 3px; justify-content: center; width: 100%; }
        .kb-key { 
            padding: 12px 0; width: 8.5%; 
            background: #d3d6da; border-radius: 4px; 
            font-weight: bold; cursor: pointer; user-select: none; 
            display: flex; align-items: center; justify-content: center;
            font-size: 14px; color: #333;
        }
        .kb-wide { width: 13%; font-size: 12px; }
        #wordle-msg { color: var(--red); font-weight: bold; height: 25px; margin-top: 5px; }

        /* --- GAME 4: SLOTS --- */
        .slots-container { display: flex; justify-content: center; gap: 10px; margin: 20px 0; background: #333; padding: 15px; border-radius: 10px; border: 4px solid var(--gold); }
        .slot-window { width: 70px; height: 100px; background: white; border-radius: 5px; display: flex; align-items: center; justify-content: center; font-size: 3em; overflow: hidden; border: 2px solid #999; }
        .spin-anim { animation: spinBlur 0.1s infinite; }
        @keyframes spinBlur { 0% { opacity: 0.5; transform: translateY(-5px); } 50% { opacity: 1; transform: translateY(5px); } 100% { opacity: 0.5; transform: translateY(-5px); } }

        /* --- GAME 5: PEDAGOGY --- */
        .ped-question { font-size: 1.1em; margin-bottom: 20px; font-weight: bold; }
        .ped-btn { display: block; width: 100%; margin: 10px 0; padding: 15px; border: 2px solid #ddd; background: #f9f9f9; color: #333; border-radius: 10px; text-align: left; cursor: pointer; transition: background 0.3s; }
        .ped-btn:hover { background: #eef; border-color: var(--pink); }
        .ped-score { font-size: 1.2em; font-weight: bold; color: var(--pink); margin-bottom: 10px; }
        .ped-correct { background-color: var(--green) !important; color: white !important; border-color: var(--green) !important; }
        .ped-wrong { background-color: var(--red) !important; color: white !important; border-color: var(--red) !important; }

        /* --- EXTRAS --- */
        @keyframes pop { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
        .confetti { position: fixed; width: 10px; height: 10px; top: -10px; z-index: 999; }
        .music-panel { background: #fff; padding: 10px; border: 2px dashed var(--pink); margin-bottom: 15px; border-radius: 10px; }
        .active-music { background: var(--pink); color: white; }
        input[type="text"] { padding: 10px; width: 70%; border: 2px solid var(--pink); border-radius: 5px; margin-top: 10px; }
        .choice-buttons { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-top: 15px; align-items: center; }
        
        @media (max-width: 400px) {
            .w-box { width: 34px; height: 34px; font-size: 16px; }
            .kb-key { padding: 8px 0; font-size: 11px; }
        }
        /* --- NAPRAWA WYGLÄ„DU OSI CZASU (ZDJÄ˜CIA I WIDEO) --- */

/* 1. Ujednolicenie rozmiaru mediÃ³w */
.timeline-item img,
.timeline-item video {
    width: 100%;             /* SzerokoÅ›Ä‡ na caÅ‚y dostÄ™pny kontener */
    max-width: 500px;        /* Ale nie szersze niÅ¼ 500px na duÅ¼ych ekranach */
    height: 250px;           /* WYMUSZONA, staÅ‚a wysokoÅ›Ä‡ dla wszystkich */
    object-fit: cover;       /* Kluczowe! Przycina zdjÄ™cie/film, Å¼eby wypeÅ‚niÅ‚o ramkÄ™ bez deformacji */
    border-radius: 10px;     /* ZaokrÄ…glone rogi */
    border: 3px solid var(--pink); /* RÃ³Å¼owa ramka */
    display: block;          /* UÅ‚atwia centrowanie */
    margin: 15px auto;       /* OdstÄ™p gÃ³ra/dÃ³Å‚ i centrowanie poziome */
    background-color: #eee;  /* Szare tÅ‚o, zanim zaÅ‚aduje siÄ™ zdjÄ™cie */
}

/* 2. WyÅ›rodkowanie przyciskÃ³w pod zdjÄ™ciami */
.timeline-item button {
    display: block;
    margin-left: auto;
    margin-right: auto;
    min-width: 150px;        /* Å»eby przyciski miaÅ‚y podobnÄ… wielkoÅ›Ä‡ */
}

/* --- DOPASOWANIE DO TELEFONU (Responsive) --- */

/* Na mniejszych ekranach zmniejszamy trochÄ™ wysokoÅ›Ä‡, Å¼eby nie zajmowaÅ‚o caÅ‚ego ekranu */
@media (max-width: 600px) {
    .timeline-item img,
    .timeline-item video {
        height: 180px; /* Mniejsza staÅ‚a wysokoÅ›Ä‡ na telefonach */
    }
    
    /* Opcjonalnie: zmniejszenie paddingu osi czasu na telefonie */
    .timeline-item {
        padding-left: 10px;
        margin: 15px 0;
    }
}
    </style>
</head>
<body>

    <audio id="bgm1" src="piosenka1.mp3" loop preload="auto"></audio>
<audio id="bgm2" src="piosenka2.mp3" loop preload="auto"></audio>

    <div class="container">
        
        <div class="music-panel">
            <small>ğŸµ Wybierz klimat:</small><br>
            <button onclick="playMusic(1, this)">1 Piosenka</button>
            <button onclick="playMusic(2, this)">2 Piosenka</button>
            <button onclick="stopMusic()">Stop</button>
        </div>

        <div id="phase-1">
            <h1>CzeÅ›Ä‡ Kochanie! ğŸ’–</h1>
            <p>Zapraszam CiÄ™ do walentynkowego centrum rozrywki. PrzygotowaÅ‚em dla Ciebie kilka niespodzianek.</p>
            <h3>Rozgrzewka: Dlaczego Ty?</h3>
            <div id="reason-display">
                <span id="reason-text">Kliknij przycisk poniÅ¼ej...</span>
            </div>
            <button onclick="nextReason()">Odkryj kolejny powÃ³d</button>
            <p>PostÄ™p: <span id="reason-counter">0</span>/6 (wymagane)</p>
            <button id="btn-start" class="hidden" onclick="changePhase(2)">Wchodzimy do gry >></button>
        </div>

        <div id="phase-2" class="hidden">
            <h2>Nasza OÅ› Czasu ğŸ“…</h2>
            <div id="tl-1" class="timeline-item active">
                <b>PoczÄ…tek</b>
                <p>To zdjÄ™cie przypomina mi, Å¼e najwiÄ™ksze szczÄ™Å›cie mam tuÅ¼ obok siebie.</p>
                <img src="zdjecie1.jpg" alt="Foto 1">
                <button onclick="unlockTL(2)">PamiÄ™tam!</button>
            </div>
            <div id="tl-2" class="timeline-item">
                <b>WspÃ³lne chwile</b>
                <p>Tu zrozumiaÅ‚em, jak bardzo chcÄ™ tworzyÄ‡ z TobÄ… kolejne wspomnienia.</p>
                <img src="zdjecie2.jpg" alt="Foto 2">
                <button onclick="unlockTL(3)" disabled>Zablokowane</button>
            </div>
            
            <div id="tl-3" class="timeline-item">
                <p>Ten uÅ›miech to mÃ³j ulubiony widok</p>
    <video width="100%" controls style="border-radius: 10px; border: 3px solid var(--pink); display: block;">
        <source src="film.mp4" type="video/mp4">
        Twoja przeglÄ…darka nie wspiera odtwarzacza wideo.
    </video>
    <button onclick="unlockTL(4)" disabled style="margin-top: 10px;">Co dalej?</button>
</div>
            <div id="tl-4" class="timeline-item hidden timeline-special">
                <h2 style="color: goldenrod;">ğŸ“¸ JEDNO WAÅ»NE POSTANOWIENIE ğŸ“¸</h2>
                <p style="font-size: 1.1em;">Wiem, Å¼e uciekasz przed obiektywem i nie lubisz zdjÄ™Ä‡, ale...</p>
                <p style="font-weight: bold;">Musimy to zmieniÄ‡!</p>
                <p>RÃ³bmy je czÄ™Å›ciej â€“ nie dla innych, nie na pokaz, ale <b>tylko dla nas</b>.</p>
                <img id="refuse-gif" src="reakcja.gif" class="hidden" style="max-width: 200px; display: block; margin: 10px auto; border-radius:10px;">
                <div class="choice-buttons">
                    <button id="btn-promise" onclick="changePhase(3)" style="background-color: var(--gold); color: black; font-weight: bold; z-index: 10;">ObiecujÄ™! âœ¨</button>
                    <button id="btn-refuse" onclick="refusePromise()" style="background-color: var(--red);">Nie obiecujÄ™ ğŸ™„</button>
                </div>
            </div>
        </div>
        

        <div id="phase-3" class="hidden">
            <h2>ğŸ® Salon Gier ğŸ®</h2>
            <p>MoÅ¼esz graÄ‡ we wszystkie gry ile chcesz! Baw siÄ™ dobrze.</p>
            <p style="font-weight:bold; color:var(--pink);">âš ï¸ Wystarczy wygraÄ‡ w DWIE dowolne gry, aby odblokowaÄ‡ prezent!</p>
            
            <div id="game-menu">
                <button class="btn-game-select" onclick="startGame('memory')">
                    <span>ğŸƒ 1. Memory (Pary)</span> <span id="s-memory">âŒ</span>
                </button>
                <button class="btn-game-select" onclick="startGame('catcher')">
                    <span>ğŸ§º 2. Åapacz Serc (Ze Skillami!)</span> <span id="s-catcher">âŒ</span>
                </button>
                <button class="btn-game-select" onclick="startGame('wordle')">
                    <span>ğŸ”¤ 3. SÅ‚owne Walentynki</span> <span id="s-wordle">âŒ</span>
                </button>
                <button class="btn-game-select" onclick="startGame('slots')">
                    <span>ğŸ° 4. Jackpot MiÅ‚oÅ›ci</span> <span id="s-slots">âŒ</span>
                </button>
                <button class="btn-game-select" onclick="startGame('pedagogy')">
                    <span>ğŸ“ 5. Egzamin Pedagogiczny</span> <span id="s-pedagogy">âŒ</span>
                </button>
                
                <div id="unlock-msg" class="hidden" style="color:green; font-weight:bold; margin-top:20px; font-size:1.2em; border:2px solid green; padding:10px; border-radius:10px;">
                    ğŸ‰ Brawo! OdblokowaÅ‚aÅ› kolejna sekcje! <br>
                    MoÅ¼esz graÄ‡ dalej lub odebraÄ‡ nagrodÄ™.
                </div>
                <button id="btn-final" class="hidden" onclick="changePhase('match')" style="background:var(--gold); color:black; font-weight:bold; width:100%; margin:20px 0; padding:20px; font-size:1.3em;">Sprawdz naszÄ… miÅ‚oÅ›Ä‡</button>
            </div>

            <div id="game-memory" class="hidden">
                <h3>ZnajdÅº Pary</h3>
                <div id="mem-levels">
                    <p>Wybierz poziom:</p>
                    <button onclick="setupMemory('easy')" style="background:var(--green)">ğŸ˜Œ Åatwy (3 pary)</button>
                    <button onclick="setupMemory('hard')" style="background:var(--red)">ğŸ˜ˆ Trudny (6 par)</button>
                </div>
                <div id="mem-game-area" class="hidden">
                    <div class="memory-grid" id="mem-board"></div>
                </div>
                <button onclick="backToMenu()" style="margin-top:20px; background:#555;">ğŸ”™ WrÃ³Ä‡ do menu</button>
            </div>

            <div id="game-catcher" class="hidden">
                <h3>Åap Serduszka! â¤ï¸</h3>
                <p>ZdobÄ…dÅº 10 punktÃ³w.</p>
                <p style="font-size:0.8em">â¤ï¸ +1 | ğŸ’£ -2 | Upuszczenie -1</p>
                <p>Wynik: <span id="score">0</span>/10</p>
                <div id="catcher-area">
                    <div id="basket">Ty</div>
                </div>
                <div class="skills-bar">
                    <button id="skill-magnet" class="skill-btn" onclick="activateMagnet()">ğŸ§² Magnes (5s)</button>
                    <button id="skill-freeze" class="skill-btn" onclick="activateFreeze()">â„ï¸ ZamroÅ¼enie (5s)</button>
                </div>
                <div class="controls">
                    <button ontouchstart="moveBasket(-1)" onmousedown="moveBasket(-1)">â¬…ï¸ LEWO</button>
                    <button ontouchstart="moveBasket(1)" onmousedown="moveBasket(1)">PRAWO â¡ï¸</button>
                </div>
                <button onclick="backToMenu()" style="margin-top:20px; background:#555;">ğŸ”™ WrÃ³Ä‡ do menu</button>
            </div>

            <div id="game-wordle" class="hidden">
                <h3>SÅ‚owne Walentynki</h3>
                <p>Zgadnij 5-literowe hasÅ‚o. Tylko polskie sÅ‚owa!</p>
                <div id="wordle-msg"></div>
                <div id="wordle-container"></div>
                <div id="wordle-keyboard"></div>
                <div id="wordle-restart" class="hidden" style="margin-top:20px;">
                     <button onclick="initWordle()" style="background:var(--gold); color:black;">ğŸ”„ NastÄ™pne sÅ‚owo</button>
                </div>
                <button onclick="backToMenu()" style="margin-top:20px; background:#555;">ğŸ”™ WrÃ³Ä‡ do menu</button>
            </div>

            <div id="game-slots" class="hidden">
                <h3>ğŸ° Jackpot MiÅ‚oÅ›ci ğŸ°</h3>
                <p>Wylosuj 3 serca (â¤ï¸), aby wygraÄ‡!</p>
                <div class="slots-container">
                    <div class="slot-window" id="slot1">ğŸ’</div>
                    <div class="slot-window" id="slot2">ğŸ’</div>
                    <div class="slot-window" id="slot3">7</div>
                </div>
                <button id="spin-btn" onclick="spinSlots()" style="background:var(--gold); color:black; font-weight:bold; font-size:1.5em; padding:15px 40px;">ZAKRÄ˜Ä†!</button>
                <p id="slot-msg" style="height:20px; font-weight:bold;"></p>
                <button onclick="backToMenu()" style="margin-top:20px; background:#555;">ğŸ”™ WrÃ³Ä‡ do menu</button>
            </div>

            <div id="game-pedagogy" class="hidden">
                <h3>ğŸ“ Pedagog Roku ğŸ“</h3>
                <div id="ped-level-select">
                    <p>Wybierz poziom egzaminu:</p>
                    <button onclick="startPedGame('easy')" style="background:var(--green)">ğŸ˜Œ Åatwy (Å»yciowy - 8 pytaÅ„)</button>
                    <button onclick="startPedGame('hard')" style="background:var(--red)">ğŸ¤“ Trudny (Kujonka - 8 pytaÅ„)</button>
                </div>
                <div id="ped-game-area" class="hidden">
                    <p class="ped-score">Pytanie: <span id="ped-q-num">1</span> / 8</p>
                    <div id="ped-question-text" class="ped-question"></div>
                    <div id="ped-options"></div>
                </div>
                <button onclick="backToMenu()" style="margin-top:20px; background:#555;">ğŸ”™ WrÃ³Ä‡ do menu</button>
            </div>
        </div>
        <div id="phase-match" class="hidden">
    <h2>â¤ï¸ Licznik Dopasowania â¤ï¸</h2>
    <p>SprawdÅºmy, czy naprawdÄ™ jesteÅ›my dla siebie stworzeni...</p>
    
    <div style="background: white; padding: 20px; border-radius: 15px; border: 2px solid var(--pink); margin: 20px 0;">
        <div id="match-names" style="font-size: 1.2em; font-weight: bold; margin-bottom: 10px;">
            Ty + Ja
        </div>
        
        <div style="width: 100%; background: #eee; height: 30px; border-radius: 15px; overflow: hidden; margin: 15px 0;">
            <div id="match-bar" style="width: 0%; height: 100%; background: var(--pink); transition: width 2s ease-out;"></div>
        </div>
        
        <div id="match-result" style="font-size: 2em; font-weight: bold; color: var(--pink);">0%</div>
    </div>

    <div id="match-msg" style="min-height: 50px; font-weight: bold; margin-bottom: 15px;"></div>
    
    <button id="btn-calc" onclick="runMatch()">Oblicz dopasowanie!</button>
    <button id="btn-retry-match" class="hidden" onclick="runMatch()">SprÃ³buj ponownie ğŸ”„</button>
    <br>
    <button id="btn-to-final" class="hidden" onclick="changePhase(4)" style="background: var(--gold); color: black;">Dobra, idziemy dalej >></button>
</div>

       <div id="phase-4" class="hidden">
    <h2>ğŸ” Sejf WspomnieÅ„ ğŸ”</h2>
    <p>Odpowiedz na 8 pytaÅ„, aby otworzyÄ‡ sejf. <br>
       <small style="color: var(--pink);">JeÅ›li nie pamiÄ™tasz, kliknij w serduszko â¤ï¸ â€“ ono Ci podpowie!</small></p>
    
    <div id="safe-quiz-container" class="safe-ui">
        <p class="ped-score">Pytanie: <span id="safe-q-num">1</span> / 8</p>
        
        <div id="hint-heart" onclick="showSafeHint()" style="cursor: pointer; font-size: 30px; margin-bottom: 10px; display: inline-block; animation: heartbeat 1.5s infinite;">
            â¤ï¸
        </div>
        <div id="safe-hint-text" class="hidden" style="font-size: 0.85em; color: var(--pink); font-style: italic; margin-bottom: 10px;"></div>

        <div id="safe-question-text" style="font-size: 1.1em; font-weight: bold; margin-bottom: 15px;"></div>
        
        <input type="text" id="safe-answer-input" placeholder="Twoja odpowiedÅº..." 
               style="width: 90%; padding: 12px; border: 2px solid var(--pink); border-radius: 10px; margin-bottom: 15px; text-align: center;">
        
        <button onclick="checkSafeAnswer()" style="width: 90%; background: var(--pink); font-weight: bold;">SprawdÅº odpowiedÅº</button>
    </div>

    <div id="safe-opened" class="hidden">
        <div style="font-size: 60px; animation: pop 1s infinite;">ğŸ”“</div>
        <h3 style="color: var(--green);">SEJF OTWARTY!</h3>
        <p>UdaÅ‚o siÄ™! Teraz moÅ¼esz przeczytaÄ‡ mÃ³j list.</p>
        <button onclick="changePhase(5)" style="background: var(--gold); color: black;">CZYTAJ LIST >></button>
    </div>
</div>

        <div id="phase-5" class="hidden">
            <h1>KOCHAM CIÄ˜! â¤ï¸</h1>
            <div style="background:#FFF0F5; padding:20px; border:2px dashed hotpink; margin:20px 0; text-align:left;">
                <p>Kochana Wiktorio,</p>
                <p>

Kocham CiÄ™ za to, jaka jesteÅ›. Za Twoje dobre serce, za spokÃ³j, ktÃ³ry wnosisz do mojego Å¼ycia i za to, Å¼e mimo wszystkiego potrafisz byÄ‡ tak ciepÅ‚Ä… osobÄ….

Kocham CiÄ™ za to, Å¼e mnie wspierasz i jesteÅ› ze mnie dumna. Twoje sÅ‚owa naprawdÄ™ majÄ… dla mnie znaczenie. Przy Tobie czujÄ™ siÄ™ jak w domu â€” bez udawania, bez stresu, po prostu sobÄ….

16.05.2025 to dla mnie coÅ› wiÄ™cej niÅ¼ data. A GdaÅ„sk i Twoja radoÅ›Ä‡ przy morzu tylko upewniÅ‚y mnie, Å¼e chcÄ™ tworzyÄ‡ z TobÄ… kolejne wspomnienia.

Po prostu dziÄ™kujÄ™, Å¼e jesteÅ›. I Å¼e mogÄ™ byÄ‡ obok Ciebie.

</p>
                <p>TwÃ³j â¤ï¸</p>
            </div>
            <div style="background:gold; padding:20px; border-radius:10px; font-weight:bold; border:2px solid orange;">
                ğŸŸï¸ Uprawnia do:
ğŸ’‹ 1 dowolnego caÅ‚usa (bez limitu czasu)
ğŸ¤— 1 dÅ‚ugiego przytulenia (minimum 60 sekund)
ğŸŸ WspÃ³lnego wyjÅ›cia po frytki do Maka
ğŸŒŠ Zaplanowania kolejnego wyjazdu nad morze
ğŸ˜Œ Albo czegokolwiek tylko zapragnie

Termin waÅ¼noÅ›ci:
Na zawsze.

Podpis:
TwÃ³j osobisty chÅ‚opak ğŸ–Š
            </div>
            <div style="margin-top: 30px; padding: 20px; background: #fff; border-radius: 15px; border: 2px solid var(--pink);">
    <h3>To jeszcze nie koniec... ğŸŒ¹</h3>
    <p>Kliknij poniÅ¼ej, aby odebraÄ‡ coÅ› specjalnego:</p>
    <button onclick="sendVirtualKiss()" style="background: #ff4d4d; font-size: 1.4em; padding: 20px 40px;">
        ğŸ’‹ WYÅšLIJ CAÅUSA I ODBIERZ KWIATY
    </button>
</div>
        </div>
        <div id="grand-finale-overlay" class="hidden">
    <div class="finale-content">
        <div class="beating-heart-giant">â¤ï¸</div>
        <div class="flowers-delivery">
            <span style="animation-delay: 0.5s">ğŸŒ¹</span>
            <span style="animation-delay: 1.0s">ğŸ’</span>
            <span style="animation-delay: 1.5s">ğŸŒ·</span>
            <span style="animation-delay: 2.0s">ğŸŒ»</span>
            <span style="animation-delay: 2.5s">ğŸŒº</span>
        </div>
        <h2 class="finale-text">Wszystkie kwiaty Å›wiata dla Ciebie!</h2>
        <h2 class="finale-text">Kocham CiÄ™ bardzo</h2>
    </div>
</div>

    </div>
    

    <script>
        // --- DANE ---
        const allReasons = [
            "Kocham CiÄ™ za to, jak mnie wspierasz. Zawsze kiedy mam gorszy dzieÅ„, Ty jesteÅ› obok. Motywujesz mnie.",
            "Kocham CiÄ™ za to, jaka jesteÅ› tylko dla mnie. Za ten TwÃ³j sÅ‚odki sposÃ³b, w jaki siÄ™ do mnie odzywasz.",
            "Kocham Twoje dobre serce. Podziwiam CiÄ™ za to, Å¼e mimo tego, co sama przechodzisz, potrafisz byÄ‡ dobra dla kaÅ¼dego.",
            "Kocham nasze wspomnienia. 16.05.2025 to dzieÅ„, ktÃ³ry na zawsze zostanie w mojej gÅ‚owie.",
            "Kocham GdaÅ„skâ€¦ widok morza i Twoje szczÄ™Å›cie, bo tak bardzo je uwielbiasz.",
            "Kocham TwojÄ… nieÅ›miaÅ‚oÅ›Ä‡. To, Å¼e jesteÅ› takim maÅ‚ym wstydziochem, jest dla mnie urocze.",
            "Kocham CiÄ™, bo przy Tobie czujÄ™ siÄ™ jak w domu. Przy Tobie jest spokÃ³j, bezpieczeÅ„stwo i ciepÅ‚o.",
            "MarzÄ™ o tym, Å¼ebyÅ›my widywali siÄ™ czÄ™Å›ciej. KaÅ¼de spotkanie to dla mnie Å›wiÄ™to.",
            "Brakuje mi Twojego dotyku na co dzieÅ„. ChciaÅ‚bym byÄ‡ teraz obok Ciebie.",
            "Uwielbiam Twoje zdjÄ™cia. WysyÅ‚aj mi ich wiÄ™cej, bo nigdy nie mam dosyÄ‡ patrzenia na Ciebie.",
            "ChcÄ™ dostawaÄ‡ od Ciebie selfie z zaskoczenia â€“ takie sÄ… najpiÄ™kniejsze.",
            "TÄ™skniÄ™ za zapachem Twoich wÅ‚osÃ³w i tym, jak siÄ™ do mnie przytulasz.",
            "ChciaÅ‚bym, Å¼ebyÅ› wysyÅ‚aÅ‚a mi wiÄ™cej filmikÃ³w, jak coÅ› opowiadasz. TwÃ³j gÅ‚os mnie uspokaja.",
            "Moja tapeta w telefonie jest super, ale... przydaÅ‚yby siÄ™ nowe zdjÄ™cia do kolekcji!",
            "Czekam na dzieÅ„, kiedy nie bÄ™dziemy musieli siÄ™ Å¼egnaÄ‡ na dworcu.",
            "KaÅ¼dy kilometr miÄ™dzy nami jest warty tego, co czujÄ™. Ale wolaÅ‚bym, Å¼eby tych kilometrÃ³w nie byÅ‚o.",
            "ChcÄ™ znaÄ‡ kaÅ¼dy szczegÃ³Å‚ Twojego dnia. Pisz do mnie o wszystkim.",
            "MarzÄ™ o wspÃ³lnym oglÄ…daniu filmÃ³w na Å¼ywo, przytuleni pod kocem, a nie przez internet.",
            "Twoja galeria w moim telefonie to moje ulubione miejsce, ale wciÄ…Å¼ mi maÅ‚o!",
            "ChciaÅ‚bym mÃ³c CiÄ™ przytuliÄ‡ w kaÅ¼dej chwili, gdy masz gorszy dzieÅ„.",
            "ZrÃ³b teraz gÅ‚upiÄ… minÄ™ i wyÅ›lij mi zdjÄ™cie! Kocham TwÃ³j dystans do siebie.",
            "Brakuje mi wspÃ³lnych spacerÃ³w bez patrzenia na zegarek i sprawdzania, kiedy masz pociÄ…g.",
            "ChcÄ™ wiÄ™cej Twoich uÅ›miechÃ³w skierowanych tylko do mnie.",
            "Planowanie kolejnego spotkania to moja ulubiona czynnoÅ›Ä‡.",
            "ChciaÅ‚bym kraÅ›Ä‡ Ci wiÄ™cej caÅ‚usÃ³w na Å¼ywo.",
            "JesteÅ› najpiÄ™kniejszym powodem, dla ktÃ³rego co chwilÄ™ sprawdzam telefon.",
            "WyÅ›lij mi zdjÄ™cie tego, co teraz widzisz. ChcÄ™ patrzeÄ‡ na Å›wiat Twoimi oczami.",
            "Kocham to, Å¼e mimo odlegÅ‚oÅ›ci jesteÅ›my tak blisko.",
            "Nie mogÄ™ siÄ™ doczekaÄ‡, aÅ¼ znÃ³w wezmÄ™ CiÄ™ za rÄ™kÄ™.",
            "ChcÄ™ budziÄ‡ siÄ™ obok Ciebie i robiÄ‡ Ci Å›niadanie.",
            "PamiÄ™taj, Å¼e jestem z TobÄ… myÅ›lami w kaÅ¼dej sekundzie."
        ];

        const correctFinalAnswer = "wÅ‚oska"; 
        
        // --- WORDLE DATA ---
        const wordleTargets = [
    "SERCE", "CAÅUS", "SKARB", "KOCHA", "RAZEM", 
    "MAGIA", "CUDNA", "KWIAT", "DUSZA", "ANIOÅ", 
    "PASJA", "OGIEÅƒ", "BAJKA", "DOTYK", "BLASK", 
    "BUZIA", "ZÅOTO", "IDEAÅ", "MARZÄ˜", "LUBIÄ˜", 
    "MYÅšLÄ˜", "CZULE", "DOBRA", "BOSKA", "WINKO", 
    "KAWKA", "PLAÅ»A", "RANEK", "SZEPT", "WIDOK", 
    "FOTKA", "LISTY", "SÅOWA", "GESTY", "MISIA",
    "MOTYL", "TULIÄ†", "ZGODA", "WIERZ", "AMORY", 
    "OCZKO", "TYLKO", "NASZE", "MIÅOÅš", "TWOJA", 
    "TWOJE", "UROK", "UROKI", "WIÄ˜ZI", "DARZÄ˜"
];

        // OGROMNY SÅOWNIK (Do walidacji)
        const validWords = [
            ...wordleTargets,
            "WOREK", "WAZON", "KUBEK", "OKNA", "DRZWI", "KARTA", "MAPA", "LAMPA", "FOTEL", "OBRAZ", "ÅšCIANA", "PODÅOGA", "SUFIT", "KABEL", "MYSZ", "EKRAN",
            "WODA", "SOK", "MLEKO", "KAWA", "HERBA", "ZUPA", "DANIE", "MIÄ˜SO", "RYBA", "JAJKO", "CHLEB", "BUÅKA", "MASÅO", "SER", "DÅ»EM", "MIÃ“D",
            "OWOC", "JABÅK", "GRUSZ", "ÅšLIWA", "BANAN", "CYTRY", "AGREST", "MALIN", "JAGOD", "WARZY", "MARCH", "ZIEMN", "BURAK", "CEBUL", "CZOSN",
            "KOTEK", "PIESK", "KROWA", "ÅšWINK", "KOÅƒ", "OWCA", "KOZA", "KURA", "KACZK", "GÄ˜Åš", "INDYK", "RYBKA", "PTAK", "WRÃ“BE", "GOÅÄ„B", "ORZEÅ",
            "DOMEK", "BLOK", "WIEÅ»A", "ZAMEK", "PAÅAC", "WILLA", "CHATK", "SZAÅA", "NAMI", "HOTEL", "POKÃ“J", "SALON", "KUCHN", "ÅAZIE", "GARAÅ»",
            "AUTO", "POCIÄ„", "STATE", "ÅÃ“DKA", "JACHT", "MOTOR", "SKUTE", "BUSIK", "TRAMW", "METRO", "SAMOL", "RAKIE", "DROGA", "ULICA", "MOST",
            "SZKOÅ", "PRACA", "BIURO", "SKLEP", "BANK", "POCZT", "SZPIT", "APTEK", "KINO", "TEATR", "OPERA", "MUZEU", "PARK", "LAS", "ÅÄ„KA",
            "MAMA", "TATA", "BABC", "DZIAD", "WUJEK", "CIOCI", "BRAT", "SIOST", "SYN", "CÃ“RKA", "WNUK", "WNUCZ", "MÄ„Å»", "Å»ONA", "TEÅšÄ†",
            "GÅOWA", "RÄ˜KA", "NOGA", "BRZUC", "PLECY", "SZYJA", "WÅOSY", "OCZY", "USZY", "NOS", "USTA", "ZÄ˜BY", "JÄ˜ZYK", "PALEC", "PAZNO",
            "BLUZK", "SPODN", "SPÃ“DN", "SUKIE", "SWETE", "KURTK", "PÅASZ", "CZAPK", "SZAL", "RÄ˜KAW", "BUTY", "SKARP", "MAJTK", "BIUST", "PIGAM",
            "ZEGAR", "CZAS", "GODZI", "MINUT", "SEKUN", "RANO", "WIECZ", "NOC", "DZIEÅƒ", "TYDZ", "MIESI", "ROK", "WIOSN", "LATO", "JESIE", "ZIMA",
            "SÅOÅƒC", "KSIÄ˜Å»", "GWIAZ", "CHMUR", "DESZC", "ÅšNIEG", "WIATR", "BURZA", "MGÅA", "MRÃ“Z", "CIEPÅ", "ZIMNO", "JASNO", "CIEMN", "MOKRO",
            "DOBRY", "ZÅY", "DUÅ»Y", "MAÅY", "STARY", "NOWY", "MÅODY", "ÅADNY", "BRZYD", "CZYST", "BRUDN", "SZYBK", "WOLNY", "CIEPÅ", "ZIMNY",
            "BIAÅY", "CZARN", "SZARY", "CZERW", "ZIELO", "NIEBI", "Å»Ã“ÅTY", "BRÄ„ZO", "RÃ“Å»OW", "FIOLE", "POMAR", "ZÅOTY", "SREBR", "KOLOR", "BARWA",
            "JEDEN", "DWA", "TRZY", "CZTER", "PIÄ˜Ä†", "SZEÅšÄ†", "SIEDM", "OSIEM", "DZIEW", "DZIES", "STO", "TYSIÄ„", "MILIO", "LICZB", "CYFRA",
            "ROBIÄ†", "MIEÄ†", "BYÄ†", "IÅšÄ†", "JCHAÄ†", "JEÅšÄ†", "PIÄ†", "SPAÄ†", "WSTAÄ†", "MYÄ†", "UBRAÄ†", "KOCHA", "LUBIÄ†", "CHCIE", "MÃ“C", "UMIEÄ†",
            "KARTY", "GRACZ", "PLANS", "PIONE", "KOSTK", "RUNDA", "START", "META", "WYNIK", "PUNKT", "FAUL", "GOL", "KOSZ", "BRAMK", "SÄ˜DZIA",
            "LUSTRO", "STOÅK", "ÅAWKA", "TRAWA", "PIASE", "MORZE", "RZEKA", "JEZIO", "SKAÅA", "GÃ“RA", "DOLIN", "DESKA", "ÅšRUBA", "MÅOTE", "GWOÅ¹D",
            "KLUCZ", "ZAMEK", "PILOT", "RADIO", "WIDEO", "PÅYTA", "KOSZ", "WORKI", "PUDÅO", "REGAÅ", "PÃ“ÅKA", "SZAFA", "ÅÃ“Å»KO", "BIURK", "KRZES",
            "OBRUS", "KOCYK", "POÅšCI", "PODUS", "KOÅDR", "RÄ˜CZN", "MYDÅO", "KREM", "SZMIN", "TUSZ", "WACIK", "GRZEB", "SZCZOT", "GÄ„BKA", "WANI",
            "PRALK", "SUSZA", "ZMYWA", "LODÃ“W", "PIEKA", "MIKSE4", "CZAJN", "GARNE", "PATEL", "MISKA", "ÅYÅ»KA", "WIDE", "NÃ“Å»", "SZKLA", "KIELI",
            "BUTEL", "PUSZK", "SÅOIK", "TORBA", "PLECA", "WALIZ", "PORTF", "ZEGAR", "TELEF", "TABLE", "LAPTO", "MYSZK", "DRUKA", "SKANE", "LAMBK",
            "ÅšWIEC", "ZAPAÅ", "OGNIS", "DREWN", "WÄ˜GIEL", "POPIÃ“", "DYM", "PARA", "LÃ“D", "GRAD", "SZRON", "ROSA", "TÄ˜CZA", "BURZA", "PIORU",
            "GROM", "HAÅAS", "CISZA", "DÅ¹WIÄ˜", "MUZYK", "PIOSN", "TANIEC", "KROK", "SKOK", "BIEG", "MARSZ", "SPACE", "JAZDA", "LOT", "REJS",
            "BILET", "PASZP", "DOWÃ“D", "PRAWO", "UMOWA", "FAKTU", "PARAG", "RESZT", "CENA", "KOSZT", "ZYSK", "DÅUG", "KREDY", "RATA", "BANKO",
            "MONET", "GROSZ", "ZÅOTY", "DOLAR", "EURO", "FUNT", "JEN", "FRANK", "KASSA", "SEJF", "SKARB", "ZÅOTO", "SREBR", "BRÄ„Z", "MIEDÅ¹",
            "Å»ELAZ", "STAL", "BETON", "CEGÅA", "KAMIE", "PIACH", "GLINA", "ZIOÅO", "KWIAT", "DRZEW", "KRZAK", "TRAWA", "MCHY", "GRZYB", "LASY",
        // RZECZY I DOM
            "ROWER", "BRAMA", "KUBEK", "LAMPA", "FOTEL", "OBRAZ", "SZAFA", "ÅÃ“Å»KO", "DESKA", "ÅšRUBA", "KLUCZ", "ZAMEK", "WOREK", "KOSZ", "PUDÅO", "KARTA", 
            "MYSZY", "EKRAN", "KABEL", "LISTA", "PAPIER", "PIÃ“RO", "ZESZYT", "KSIÄ„Å»", "SZYBA", "DACHY", "CEGÅA", "BETON", "RURKA", "KRAN", "WANNA", "ZLEW",
            "PRÄ„D", "GAZ", "WODA", "OGIEÅƒ", "DREWN", "POKÃ“J", "SALON", "GARAÅ»", "TARAS", "BALKO", "SCHOD", "WINDA", "PIÄ˜TR", "PARTE", "MIESZ", "DOMRK",
            // JEDZENIE
            "CHLEB", "BUÅKA", "MASÅO", "MLEKO", "KAKAO", "KAWA", "DANIE", "OBIAD", "KOLAC", "ZUPA", "MIÄ˜SO", "RYBA", "JAJKO", "MÄ„KA", "CUKIE", "SÃ“L",
            "CIAST", "TORTY", "LODY", "OWOC", "JABÅK", "BANAN", "CYTRY", "MELON", "ARBUZ", "ÅšLIWA", "GRUSZ", "WIÅšNI", "MALIN", "JAGOD", "AGRES", "DÅ»EM",
            "PIZZA", "KEBAB", "BURGE", "FRYTK", "CHIPS", "KOLA", "WINO", "PIWO", "WÃ“DKA", "TOAST", "BARY", "LUNCH", "SMAK", "WÄ˜CH", "GÅÃ“D", "SYTY",
            // NATURA I ZWIERZÄ˜TA
            "KOTEK", "KOCUR", "PIESK", "SZCZE", "KROWA", "ÅšWINI", "KOZA", "OWCA", "BARAN", "KOÅƒ", "KLACZ", "Å¹REBI", "KURA", "KOGUT", "GÄ˜Åš", "KACZK",
            "PTAK", "WRÃ“BE", "GOÅÄ„B", "SROKA", "WRONA", "ORZEÅ", "SOKOÅ", "SOWA", "RYBKA", "REKIN", "WIELK", "DELFI", "WÄ„Å»", "Å»ABA", "ROBAK", "MUCHA",
            "KOMAR", "OSA", "PSZCZO", "BÄ„K", "MOTYL", "Ä†MA", "PAJÄ„K", "MRÃ“WK", "LISY", "WILK", "NIKI", "DZIK", "SARNA", "JELEÅƒ", "ÅOÅš", "Å»UBR",
            "DRZEW", "KRZAK", "TRAWA", "KWIAT", "RÃ“Å»A", "TULIP", "BRZOZ", "DÄ„B", "SOSNA", "ÅšWIER", "LASY", "GÃ“RY", "RZEKA", "MORZE", "PLAÅ»A", "PIACH",
            "SKAÅA", "ZIEMI", "GLINA", "BÅOTO","WARGA","LALKA", "KURZ", "PYÅ", "WIATR", "DESZC", "ÅšNIEG", "MRÃ“Z", "LÃ“D", "GRAD", "BURZA", "SÅOÅƒC", "CHMUR", "NIEBO",
            // CZÅOWIEK I CIAÅO
            "GÅOWA", "WÅOSY", "CZOÅO", "OCZY", "USZY", "NOS", "USTA", "ZÄ˜BY", "JÄ˜ZYK", "BRODA", "SZYJA", "BARK", "RÄ˜KA", "DÅOÅƒ", "PALEC", "PAZNO",
            "KCIUK", "ÅOKIE", "PACHA", "PLECY", "KLATA", "PIERÅš", "BRZUC", "PÄ˜PEK", "BIODR", "PUPA", "NOGA", "UDO", "KOLAN", "ÅYDKA", "STOPA", "PIÄ˜TA",
            "SERCE", "PÅUCA", "NERKI", "KREW", "KOÅšCI", "SKÃ“RA", "MIÄ˜ÅšN", "MÃ“ZG", "MYÅšL", "GÅOS", "SÅUCH", "WZROK", "DOTYK", "CZUCIE", "ZDROW", "CHORY",
            // UBRANIA
            "BLUZK", "KOSZU", "SWETE", "GOLF", "DRESY", "SPODN", "JEANS", "SZORT", "SPÃ“DN", "SUKIE", "GARNI", "MARYN", "KAMIZ", "KURTK", "PÅASZ", "FUTRO",
            "CZAPK", "SZAL", "RÄ˜KAW", "SKARP", "BUTY", "TRAMP", "KOZAK", "SZPIL", "KAPCI", "PASEK", "ZEGAR", "TORBA", "PLECA", "MAJTK", "STANIK", "PIÅ»AM",
            // CZASOWNIKI (ROBIÄ† COÅš)
            "ROBIÄ†", "MIEÄ†", "BYÄ†", "IÅšÄ†", "JCHAÄ†", "BIEC", "LATAÄ†", "PÅYWA", "SKAKA", "SIEDZ", "STAÄ†", "LEÅ»EÄ†", "SPAÄ†", "WSTAÄ†", "MYÄ†", "JEÅšÄ†",
            "PIÄ†", "GADAÄ†", "MÃ“WIÄ†", "PISAÄ†", "CZYTA", "LICZY", "UCZYÄ†", "UMIEÄ†", "WIEDZ", "ZNAÄ†", "LUBIÄ†", "KOCHA", "WOLEÄ†", "CHCIE", "MÃ“C", "MUSIE",
            "GRAÄ†", "BAWIÄ†", "ÅšMIAÄ†", "PÅAKA", "KRZYC", "SZEPT", "DODAÄ†", "ODJÄ„Ä†", "BRAÄ†", "DAÄ†", "KUPIÄ†", "PÅACI", "NOSIÄ†", "UBRAÄ†", "ZDJÄ„Ä†", "PRAÄ†",
            "MYÅšLE", "MARZY", "SNIÄ†", "BAÄ†", "CZUÄ†", "WIDZI", "SÅYSZ", "WÄ„CHA", "DOTKN", "CAÅOW", "TULIÄ†", "KOJAR", "PYTAÄ†", "PROSI", "KAZAÄ†", "WITAC",
            // PRZYMIOTNIKI
            "DOBRY", "ZÅY", "DUÅ»Y", "MAÅY", "DÅUGI", "KRÃ“TK", "NOWY", "STARY", "MÅODY", "ÅADNY", "BRZYD", "JASNY", "CIEMN", "CIEPÅ", "ZIMNY", "SÅODK",
            "KWAÅšN", "GORZK", "OSTRY", "SÅONY", "TWARD", "MIÄ˜KK", "SUCHY", "MOKRY", "PEÅNY", "PUSTY", "CZYST", "BRUDN", "SZYBK", "WOLNY", "TANIE", "DROGI",
            "BIAÅY", "CZARN", "SZARY", "Å»Ã“ÅTY", "ZLOTA", "SREBR", "RÃ“Å»OW", "MODNY", "FAJNY", "SUPER", "EXTRA", "NUDNY", "CIEKA", "GÅUPI", "MÄ„DRY", "MIÅY",
            // INNE
            "SZKOÅ", "PRACA", "URLOP", "WAKAC", "ÅšWIÄ˜T", "DZIEÅƒ", "NOC", "RANO", "TERAZ", "ZARAZ", "JUTRO", "WCZOR", "TYDZ", "MIESI", "ROK", "CZAS",
            "PUNKT", "WYNIK", "START", "META", "ZÅOTY", "DOLAR", "EURO", "RESZT", "KOSZT", "CENA", "SKLEP", "KASA", "BILET", "KINO", "FILM", "SEANS"
        ];

        let currentWordleTarget = "";
        let currentGuess = "";

        // --- PEDAGOGIKA DATA ---

        // BAZA ÅATWA (50 PYTAÅƒ) - PEDAGOGIKA ZWIÄ„ZKU (TY I ONA)
        const pedQuestionsEasy = [
            { q: "Obiekt (ja) marudzi, Å¼e tÄ™skni. Reakcja?", a: ["WeÅº siÄ™ w garÅ›Ä‡.", "Empatia: DzwoniÄ™ na kamerce!", "Uwaga do dziennika."], ok: 1 },
            { q: "Obiekt zrobiÅ‚ coÅ› gÅ‚upiego, ale chciaÅ‚ dobrze.", a: ["Do kÄ…ta.", "Wzmocnienie pozytywne: Doceniasz chÄ™ci.", "Telefon do rodzicÃ³w."], ok: 1 },
            { q: "Najlepsza metoda integracji po rozÅ‚Ä…ce?", a: ["Przytulanie i pizza.", "KartkÃ³wka.", "WykÅ‚ad."], ok: 0 },
            { q: "Obiekt jest smutny. Co robisz?", a: ["Ignorujesz.", "Stosujesz terapiÄ™ caÅ‚usami.", "Krzyczysz."], ok: 1 },
            { q: "Obiekt nie odpisuje 5 minut. Diagnoza?", a: ["Zdradza.", "ZasnÄ…Å‚ albo pracuje.", "Nie kocha."], ok: 1 },
            { q: "Jaka nagroda najlepiej dziaÅ‚a na Obiekt?", a: ["Czekolada.", "Twoje zdjÄ™cie.", "Nowe skarpetki."], ok: 1 },
            { q: "Jak spÄ™dzamy idealny wieczÃ³r?", a: ["Osobno.", "Netflix i przytulanie.", "KÅ‚Ã³tnia."], ok: 1 },
            { q: "Co jest fundamentem naszego zwiÄ…zku?", a: ["Zaufanie i miÅ‚oÅ›Ä‡.", "PieniÄ…dze.", "Gry komputerowe."], ok: 0 },
            { q: "DoszÅ‚o do sprzeczki. JakÄ… metodÄ™ stosujesz?", a: ["Ciche dni.", "Szczera rozmowa.", "Foch stulecia."], ok: 1 },
            { q: "Obiekt stresuje siÄ™ pracÄ…/studiami. Ty:", a: ["MÃ³wisz 'nie przesadzaj'.", "Wspierasz i wierzysz w niego.", "Dajesz mu wiÄ™cej zadaÅ„."], ok: 1 },
            { q: "Obiekt wysyÅ‚a Ci gÅ‚upiÄ… minÄ™ na Snapie. Twoja ocena?", a: ["Niedostateczny (brak estetyki).", "CelujÄ…cy (uroczy wariat).", "Poprawny."], ok: 1 },
            { q: "Najlepszy bodziec, Å¼eby wygoniÄ‡ Obiekt z Å‚Ã³Å¼ka?", a: ["Krzyk 'poÅ¼ar!'.", "Zapach Å›wieÅ¼ej kawy.", "Zabranie koÅ‚dry."], ok: 1 },
            { q: "Obiekt gapi siÄ™ na Ciebie bez sÅ‚owa. Diagnoza?", a: ["Zawieszenie systemu.", "Intensywne uwielbienie pomocy naukowej.", "GÅ‚Ã³d."], ok: 1 },
            { q: "Gdy Obiekt mÃ³wi 'Nic siÄ™ nie staÅ‚o', to Pani Pedagog:", a: ["Wierzy mu.", "Wie, Å¼e ma przesrane i drÄ…Å¼y temat.", "Idzie spaÄ‡."], ok: 1 },
            { q: "Najlepsza pomoc dydaktyczna w naszym zwiÄ…zku?", a: ["Koc i serial.", "Kij i marchewka.", "Mapa do pizzerii."], ok: 0 },
            { q: "Obiekt zapomniaÅ‚ o czymÅ› waÅ¼nym. Kara?", a: ["100 pompek.", "Zakaz gier przez godzinÄ™.", "Wykupienie winy sÅ‚odyczami."], ok: 2 },
            { q: "Kiedy Obiekt mÃ³wi 'Zaraz', czas realizacji wynosi:", a: ["60 sekund.", "Nigdy (wymagane ponaglenie).", "WÅ‚aÅ›nie to robiÄ™."], ok: 1 },
            { q: "Obiekt ma 'brudne myÅ›li'. Twoja reakcja?", a: ["ZgÅ‚oszenie do kuratorium.", "Lekcje dodatkowe w sypialni.", "WysÅ‚anie do spowiedzi."], ok: 1 },
            { q: "Gdy Obiekt jest gÅ‚odny, staje siÄ™:", a: ["Agresywnym drapieÅ¼nikiem.", "Bardziej kochany.", "Filozofem."], ok: 0 },
            { q: "Ulubiona aktywnoÅ›Ä‡ rekreacyjna Obiektu z TobÄ…?", a: ["Spacer w deszczu.", "LeÅ¼enie razem.", "SprzÄ…tanie."], ok: 1 },
            { q: "Jak Obiekt okazuje zazdroÅ›Ä‡?", a: ["Robi awanturÄ™.", "SÅ‚odko fuka i chce przytulenia.", "Pisze wiersze."], ok: 1 },
            { q: "Gdy Obiekt dostaje Twoje zdjÄ™cie, poziom dopaminy:", a: ["Spada.", "Wypierdala poza skalÄ™.", "Utrzymuje siÄ™ w normie."], ok: 1 },
            { q: "ZajÄ™cia praktyczne z przytulania powinny trwaÄ‡:", a: ["15 minut.", "Tylko w weekendy.", "Minimum 2 godziny dziennie."], ok: 2 },
            { q: "Obiekt chce 'jednego buziaka'. Ile dostaje?", a: ["DokÅ‚adnie jednego.", "DziesiÄ™Ä‡.", "CaÅ‚Ä… seriÄ™."], ok: 2 },
            { q: "Najskuteczniejsza resocjalizacja Obiektu?", a: ["Nagana.", "Szczera rozmowa i Twoje spojrzenie.", "Brak obiadu."], ok: 1 },
            { q: "Obiekt prosi o masaÅ¼. To przykÅ‚ad:", a: ["Lenistwa.", "Potrzeby bliskoÅ›ci.", "Wykorzystywania Ciebie."], ok: 1 },
            { q: "Gdy Pani Pedagog wychodzi z koleÅ¼ankami, Obiekt:", a: ["PÅ‚acze w kÄ…cie.", "TÄ™skni grzecznie.", "Robi imprezÄ™."], ok: 1 },
            { q: "Idealny poranek dla Obiektu?", a: ["Bieganie o 6 rano.", "Spanie do 11 i Ty obok.", "Szybkie Å›niadanie."], ok: 1 },
            { q: "Obiekt mÃ³wi 'WyglÄ…dasz Å‚adnie'. Twoja odpowiedÅº?", a: ["'Tylko Å‚adnie?'.", "'DziÄ™kujÄ™, wiem'.", "'Ty teÅ¼'."], ok: 0 },
            { q: "Kiedy Obiekt chce iÅ›Ä‡ spaÄ‡, Ty:", a: ["Pozwalasz mu.", "MÃ³wisz 'jeszcze jeden odcinek'.", "Zaczynasz rozmowÄ™."], ok: 1 },
            { q: "Fundament wychowania Obiektu?", a: ["Dyscyplina.", "CierpliwoÅ›Ä‡ i miÅ‚oÅ›Ä‡.", "Czekolada."], ok: 1 },
            { q: "Obiekt kupiÅ‚ Ci jedzenie. To przejaw:", a: ["Empatii.", "ChÄ™ci zyskania punktÃ³w.", "Obydwu."], ok: 2 },
            { q: "Gdy Obiekt ma gorszy dzieÅ„, potrzebuje:", a: ["WysÅ‚uchania.", "ÅšwiÄ™tego spokoju.", "Twojego zdjÄ™cia."], ok: 2 },
            { q: "W skali od 1 do 10, jak Obiekt CiÄ™ kocha?", a: ["5.", "10.", "BrakÅ‚o skali!"], ok: 2 },
            { q: "Obiekt zasnÄ…Å‚ na filmie. Co robisz?", a: ["Budzisz go.", "Robisz zdjÄ™cie i przykrywasz go.", "ObraÅ¼asz siÄ™."], ok: 1 },
            { q: "Widok Ciebie po tygodniu wywoÅ‚uje u niego:", a: ["UlgÄ™.", "CzystÄ… radoÅ›Ä‡ i motyle.", "GÅ‚Ã³d."], ok: 1 },
            { q: "Najlepszy sposÃ³b na 'focha' Obiektu?", a: ["Poczekanie.", "Atak caÅ‚usami.", "Przeproszenie za nic."], ok: 1 },
            { q: "Obiekt obiecaÅ‚ umyÄ‡ naczynia. Kiedy to zrobi?", a: ["Od razu.", "Jak skoÅ„czy mecz/rundÄ™.", "Nigdy."], ok: 1 },
            { q: "Kto lepiej prowadzi auto?", a: ["Ja", "On", "Oboje tak samo sÅ‚abo."], ok: 1 },
            { q: "Obiekt uwaÅ¼a, Å¼e jesteÅ›:", a: ["MÄ…dra i piÄ™kna.", "Tylko mÄ…dra.", "Tylko piÄ™kna."], ok: 0 },
            { q: "NajwiÄ™kszy talent Obiektu?", a: ["Gotowanie.", "Denerwowanie CiÄ™ sÅ‚odko.", "Spanie."], ok: 1 },
            { q: "Gdy Obiekt CiÄ™ przytula, czuje siÄ™:", a: ["Jak w domu.", "Jak na egzaminie.", "Jak w kinie."], ok: 0 },
            { q: "Co zrobiÄ‡, gdy Obiekt 'gwiazdorzy'?", a: ["PrzywoÅ‚aÄ‡ do porzÄ…dku.", "DaÄ‡ autograf.", "ZignorowaÄ‡."], ok: 0 },
            { q: "Obiekt (ja) to TwÃ³j ulubiony:", a: ["Wychowanek.", "Problem.", "Pacjent."], ok: 0 },
            { q: "ProÅ›ba o buziaka to metoda:", a: ["Perswazji.", "SzantaÅ¼u.", "Manipulacji urokiem."], ok: 0 },
            { q: "Pani Pedagog ma zawsze:", a: ["RacjÄ™.", "CiÄ™Å¼ko z nim.", "Obydwie odpowiedzi."], ok: 2 },
            { q: "Najlepsza metoda na wspÃ³lny rozwÃ³j?", a: ["PodrÃ³Å¼e.", "Planowanie przyszÅ‚oÅ›ci.", "Jedzenie pizzy."], ok: 1 },
            { q: "Obiekt bez Ciebie to jak:", a: ["Nauczyciel bez kawy.", "Dziecko bez zabawki.", "Telefon bez baterii."], ok: 2 },
            { q: "Kto czÄ™Å›ciej mÃ³wi 'Kocham CiÄ™'?", a: ["On.", "Ty.", "Oboje tyle samo."], ok: 2 },
            { q: "Czy Obiekt zasÅ‚uguje na prezent?", a: ["ZaleÅ¼y.", "Zdecydowanie tak!", "Nie wiem."], ok: 1 }
        ];

        // BAZA TRUDNA (50 PYTAÅƒ) - PRAWDZIWA PEDAGOGIKA
       const pedQuestionsHard = [
    { q: "Strefa najbliÅ¼szego rozwoju to pojÄ™cie:", a: ["Piageta.", "Wygotskiego.", "Brunera."], ok: 1 },
    { q: "Pajdocentryzm stawia w centrum:", a: ["Dziecko.", "Nauczyciela.", "Program."], ok: 0 },
    { q: "Kto zaÅ‚oÅ¼yÅ‚ Casa dei Bambini?", a: ["Maria Montessori.", "Janusz Korczak.", "C. Freinet."], ok: 0 },
    { q: "Behawioryzm skupia siÄ™ na:", a: ["PodÅ›wiadomoÅ›ci.", "BodÅºcach i reakcjach.", "Uczuciach."], ok: 1 },
    { q: "Kto napisaÅ‚ 'Jak kochaÄ‡ dziecko'?", a: ["Korczak.", "Grzegorzewska.", "SempoÅ‚owska."], ok: 0 },
    { q: "Edukacja permanentna to:", a: ["Nauka w szkole.", "Uczenie siÄ™ przez caÅ‚e Å¼ycie.", "Studia."], ok: 1 },
    { q: "Dysgrafia to trudnoÅ›Ä‡ w:", a: ["Czytaniu.", "Pisaniu.", "Liczeniu."], ok: 1 },
    { q: "Tabula rasa to termin:", a: ["Locke'a.", "Rousseau.", "Platona."], ok: 0 },
    { q: "Pedagogika waldorfska to:", a: ["Steiner.", "Dewey.", "Parkhurst."], ok: 0 },
    { q: "Andragogika bada nauczanie:", a: ["Dzieci.", "DorosÅ‚ych.", "MÅ‚odzieÅ¼y."], ok: 1 },
    { q: "System klasowo-lekcyjny stworzyÅ‚:", a: ["KomeÅ„ski.", "Herbart.", "Locke."], ok: 0 },
    { q: "Socjalizacja pierwotna zachodzi w:", a: ["Szkole.", "Rodzinie.", "Pracy."], ok: 1 },
    { q: "Rewalidacja dotyczy osÃ³b:", a: ["Zdolnych.", "Z niepeÅ‚nosprawnoÅ›ciÄ….", "DorosÅ‚ych."], ok: 1 },
    { q: "Dysleksja to trudnoÅ›ci w:", a: ["Czytaniu.", "Liczeniu.", "MÃ³wieniu."], ok: 0 },
    { q: "Ochronki w Polsce to zasÅ‚uga:", a: ["Bojanowskiego.", "Jordana.", "Dawida."], ok: 0 },
    { q: "Oligofrenopedagogika to praca z osobami:", a: ["Z niepeÅ‚nosprawnoÅ›ciÄ… intelektualnÄ….", "NiesÅ‚yszÄ…cymi.", "Niewidomymi."], ok: 0 },
    { q: "Plan DaltoÅ„ski to:", a: ["Parkhurst.", "Montessori.", "Neill."], ok: 0 },
    { q: "Surdopedagogika to praca z:", a: ["Niewidomymi.", "GÅ‚uchymi.", "Z ADHD."], ok: 1 },
    { q: "Tyflopedagogika to praca z:", a: ["Niewidomymi.", "GÅ‚uchymi.", "Autystykami."], ok: 0 },
    { q: "Metoda projektÃ³w to:", a: ["Kilpatrick/Dewey.", "Skinner.", "Freud."], ok: 0 },
    { q: "Wychowanie naturalne postulowaÅ‚:", a: ["Rousseau.", "Pestalozzi.", "Froebel."], ok: 0 },
    { q: "Piramida Maslowa - dÃ³Å‚ to potrzeby:", a: ["BezpieczeÅ„stwa.", "Fizjologiczne.", "Uznania."], ok: 1 },
    { q: "Metoda Sherborne to:", a: ["Ruch rozwijajÄ…cy.", "Nauka czytania.", "Muzykoterapia."], ok: 0 },
    { q: "Scaffolding to metafora:", a: ["Brunera.", "Piageta.", "Eriksona."], ok: 0 },
    { q: "SzkoÅ‚a Summerhill to przykÅ‚ad:", a: ["Antypedagogiki.", "Pedagogiki autorytarnej.", "SzkÃ³Å‚ koÅ›cielnych."], ok: 0 },
    { q: "Okresy sensytywne opisaÅ‚a:", a: ["Montessori.", "Grzegorzewska.", "Key."], ok: 0 },
    { q: "Dydaktyka to nauka o:", a: ["Wychowaniu.", "Nauczaniu i uczeniu siÄ™.", "Historii."], ok: 1 },
    { q: "Emancypacja w pedagogice to:", a: ["Wyzwolenie/usamodzielnienie.", "Karanie.", "Nagradzanie."], ok: 0 },
    { q: "Kto stworzyÅ‚ system prewencyjny?", a: ["Jan Bosko.", "Ignacy Loyola.", "Pijarzy."], ok: 0 },
    { q: "Zabawa tematyczna to inaczej:", a: ["Ruchowa.", "W role.", "Konstrukcyjna."], ok: 1 },
    { q: "Co to jest inkluzja?", a: ["WÅ‚Ä…czenie.", "Wykluczenie.", "Segregacja."], ok: 0 },
    { q: "Metoda oÅ›rodkÃ³w pracy to:", a: ["Grzegorzewska.", "RadliÅ„ska.", "Doroszewska."], ok: 0 },
    { q: "Pedagogika spoÅ‚eczna to:", a: ["RadliÅ„ska.", "Znaniecki.", "Koneczny."], ok: 0 },
    { q: "Wychowanie estetyczne to wychowanie przez:", a: ["Sport.", "SztukÄ™.", "PracÄ™."], ok: 1 },
    { q: "Progresywizm pedagogiczny to:", a: ["Dewey.", "Kant.", "Hegel."], ok: 0 },
    { q: "Koncepcja inteligencji wielorakich to:", a: ["Gardner.", "Goleman.", "Spearman."], ok: 0 },
    { q: "Inteligencja emocjonalna to:", a: ["Goleman.", "Gardner.", "Binet."], ok: 0 },
    { q: "Skala inteligencji Bineta sÅ‚uÅ¼y do:", a: ["Badania IQ.", "Badania wzroku.", "Badania sÅ‚uchu."], ok: 0 },
    { q: "Socjometria (Moreno) bada:", a: ["Relacje w grupie.", "Wzrost dzieci.", "ZasÃ³b sÅ‚Ã³w."], ok: 0 },
    { q: "Koncepcja 'ukrytego programu' dotyczy:", a: ["Nieoficjalnych treÅ›ci w szkole.", "Planu lekcji.", "PodrÄ™cznikÃ³w."], ok: 0 },
    { q: "Wychowanie do wolnoÅ›ci to:", a: ["Steiner.", "Korczak.", "Neill."], ok: 2 },
    { q: "Pedagogika opiekuÅ„cza zajmuje siÄ™:", a: ["Sieroctwem/opiekÄ….", "Tylko szkoÅ‚Ä….", "Sportem."], ok: 0 },
    { q: "Zasada poglÄ…dowoÅ›ci to:", a: ["Nauka na konkretach.", "Nauka z pamiÄ™ci.", "Brak obrazkÃ³w."], ok: 0 },
    { q: "Koncepcja 'szkoÅ‚y pracy' to:", a: ["Kerschensteiner.", "Marx.", "Weber."], ok: 0 },
    { q: "Aksjologia to nauka o:", a: ["WartoÅ›ciach.", "Metodach.", "Celach."], ok: 0 },
    { q: "Teleologia pedagogiczna to nauka o:", a: ["Celach wychowania.", "Åšrodkach.", "Wynikach."], ok: 0 },
    { q: "Personalizm stawia w centrum:", a: ["OsobÄ™.", "GrupÄ™.", "SpoÅ‚eczeÅ„stwo."], ok: 0 },
    { q: "Habitus to pojÄ™cie:", a: ["Bourdieu.", "Foucaulta.", "Durkheima."], ok: 0 },
    { q: "Pedagogika krytyczna to:", a: ["Giroux/Freire.", "Piaget.", "Skinner."], ok: 0 },
    { q: "Co to jest autorytaryzm?", a: ["BezwzglÄ™dne posÅ‚uszeÅ„stwo.", "Partnerstwo.", "Brak zasad."], ok: 0 },
    { q: "Pedagogika kultury to nurt:", a: ["Sprangera.", "Diltheya.", "Obu wymienionych."], ok: 2 },
    { q: "Metoda Montessori kÅ‚adzie nacisk na:", a: ["DyscyplinÄ™ zewnÄ™trznÄ….", "SamodzielnoÅ›Ä‡ (PomÃ³Å¼ mi zrobiÄ‡ to samemu).", "WykÅ‚ady nauczyciela."], ok: 1 },
    { q: "Koncepcja wychowania narodowego to:", a: ["BronisÅ‚aw Trentowski.", "Zygmunt MysÅ‚akowski.", "Bogdan NawroczyÅ„ski."], ok: 0 },
    { q: "Czym zajmuje siÄ™ pedeutologia?", a: ["Rozwojem dziecka.", "Nauczycielem i jego zawodem.", "BudowÄ… szkÃ³Å‚."], ok: 1 },
    { q: "Warunkowanie klasyczne odkryÅ‚:", a: ["PawÅ‚ow.", "Thorndike.", "Watson."], ok: 0 },
    { q: "Zasada 'wszystkiego wszystkich nauczaÄ‡' to hasÅ‚o:", a: ["KomeÅ„skiego.", "Herbarta.", "Deweya."], ok: 0 },
    { q: "Teoria asocjacyjna Herbarta dotyczy:", a: ["Kojarzenia wyobraÅ¼eÅ„.", "Kultury fizycznej.", "Uczenia siÄ™ rÃ³l."], ok: 0 },
    { q: "Co to jest kognitywizm?", a: ["Nurt badajÄ…cy procesy poznawcze.", "Nauka o miÄ™Å›niach.", "Teoria kar i nagrÃ³d."], ok: 0 },
    { q: "InkluzyjnoÅ›Ä‡ w edukacji to:", a: ["Segregacja uczniÃ³w.", "WÅ‚Ä…czanie wszystkich do wspÃ³lnej nauki.", "Wykluczanie sÅ‚abszych."], ok: 1 },
    { q: "Kto wprowadziÅ‚ pojÄ™cie 'pedagogika'?", a: ["Herbart.", "Kanty.", "Platon."], ok: 0 },
    { q: "Czym jest socjalizacja wtÃ³rna?", a: ["NaukÄ… w rodzinie.", "NaukÄ… rÃ³l spoÅ‚ecznych poza rodzinÄ….", "Odpoczynkiem."], ok: 1 },
    { q: "Pedeutologia to nauka o:", a: ["Metodach nauczania.", "OsobowoÅ›ci i pracy nauczyciela.", "Uczniu."], ok: 1 },
    { q: "Kto stworzyÅ‚ teoriÄ™ pola?", a: ["Kurt Lewin.", "Carl Jung.", "Alfred Adler."], ok: 0 },
    { q: "Metoda Dennisona to inaczej:", a: ["Gimnastyka mÃ³zgu.", "Metoda harcerska.", "Praca w grupach."], ok: 0 },
    { q: "Czym jest facylitacja?", a: ["Utrudnianiem nauki.", "UÅ‚atwianiem procesÃ³w grupowych.", "Ocenianiem uczniÃ³w."], ok: 1 },
    { q: "Koncepcja wychowania przez pracÄ™ to:", a: ["Blonski.", "Makarenko.", "Obaj wymienieni."], ok: 2 },
    { q: "Czym zajmuje siÄ™ pedagogika porÃ³wnawcza?", a: ["AnalizÄ… systemÃ³w w rÃ³Å¼nych krajach.", "PorÃ³wnywaniem ocen.", "AnalizÄ… rodzeÅ„stwa."], ok: 0 },
    { q: "Co to jest anamneza u Platona?", a: ["Zapominanie.", "Przypominanie sobie wiedzy duszy.", "Nauka pisania."], ok: 1 },
    { q: "Kto napisaÅ‚ 'WielkÄ… DydaktykÄ™'?", a: ["KomeÅ„ski.", "Locke.", "Rousseau."], ok: 0 },
    { q: "Edukacja alternatywna to:", a: ["SzkoÅ‚y publiczne.", "SzkoÅ‚y poza systemem paÅ„stwowym.", "ZajÄ™cia WF."], ok: 1 },
    { q: "Czym jest akomodacja u Piageta?", a: ["Dopasowaniem struktur do nowej wiedzy.", "WchÅ‚oniÄ™ciem wiedzy.", "Odpoczynkiem."], ok: 0 },
    { q: "Co to jest asymilacja u Piageta?", a: ["WÅ‚Ä…czenie nowych danych do istniejÄ…cych schematÃ³w.", "Zmiana schematÃ³w.", "Sen."], ok: 0 },
    { q: "Kto stworzyÅ‚ hierarchiÄ™ potrzeb?", a: ["Maslow.", "Freud.", "Fromm."], ok: 0 },
    { q: "Czym zajmuje siÄ™ pedagogika lecznicza?", a: ["Wychowaniem dzieci chorych.", "Szyciem ran.", "Aptekami."], ok: 0 },
    { q: "GÅ‚Ã³wne dzieÅ‚o Rousseau to:", a: ["'Emil'.", "'PaÅ„stwo'.", "'Manifest'.",], ok: 0 },
    { q: "Kto promowaÅ‚ 'szkoÅ‚Ä™ radosnÄ…'?", a: ["Suchodolski.", "Dawid.", "Pestalozzi."], ok: 0 },
    { q: "Czym jest metoda 'oÅ›rodkÃ³w pracy'?", a: ["NaukÄ… przy pracy fizycznej.", "ÅÄ…czeniem treÅ›ci wokÃ³Å‚ jednego tematu.", "NaukÄ… w biurze."], ok: 1 },
    { q: "Kto jest twÃ³rcÄ… harcerstwa?", a: ["Robert Baden-Powell.", "Andrzej MaÅ‚kowski.", "Obaj wymienieni."], ok: 2 },
    { q: "Czym jest resocjalizacja?", a: ["NaukÄ… chemii.", "Przywracaniem do spoÅ‚eczeÅ„stwa.", "Sportem."], ok: 1 },
    { q: "Czym zajmuje siÄ™ gerontagogika?", a: ["EdukacjÄ… osÃ³b starszych.", "Niemowlakami.", "ZwierzÄ™tami."], ok: 0 },
    { q: "Kto napisaÅ‚ 'PedagogikÄ™ uciÅ›nionych'?", a: ["Paulo Freire.", "Ivan Illich.", "Henry Giroux."], ok: 0 },
    { q: "Co to jest antypedagogika?", a: ["Bardzo surowe wychowanie.", "Rezygnacja z kierowania dzieckiem.", "Zakaz szkÃ³Å‚."], ok: 1 },
    { q: "Kto jest twÃ³rcÄ… pojÄ™cia 'spoÅ‚eczeÅ„stwo uczÄ…ce siÄ™'?", a: ["Robert Hutchins.", "Torsten Husen.", "Obaj wymienieni."], ok: 2 },
    { q: "Czym jest pedeutologia?", a: ["NaukÄ… o stopach.", "NaukÄ… o zawodzie nauczyciela.", "NaukÄ… o grach."], ok: 1 },
    { q: "Kto stworzyÅ‚ koncepcjÄ™ 'Ja' odzwierciedlonego?", a: ["Charles Cooley.", "George Mead.", "Erving Goffman."], ok: 0 },
    { q: "Co to jest dyskalkulia?", a: ["TrudnoÅ›Ä‡ w czytaniu.", "TrudnoÅ›Ä‡ w liczeniu.", "Brak mowy."], ok: 1 },
    { q: "Kto zaÅ‚oÅ¼yÅ‚ 'Nasze Dom'?", a: ["Korczak i Falska.", "Montessori.", "Rousseau."], ok: 0 },
    { q: "Czym jest metoda 'projektu'?", a: ["WykÅ‚adem.", "DziaÅ‚aniem badawczym uczniÃ³w.", "Rysowaniem."], ok: 1 },
    { q: "Kto to jest wychowawca?", a: ["KaÅ¼dy dorosÅ‚y.", "Osoba Å›wiadomie kierujÄ…ca rozwojem.", "Policjant."], ok: 1 },
    { q: "Czym zajmuje siÄ™ pedagogika rewalidacyjna?", a: ["Osobami z niepeÅ‚nosprawnoÅ›ciÄ….", "Zdolnymi uczniami.", "Sportowcami."], ok: 0 },
    { q: "Co to jest dydaktyka ogÃ³lna?", a: ["Nauka o nauczaniu.", "Nauka o gotowaniu.", "Nauka o zwierzÄ™tach."], ok: 0 },
    { q: "Kto promowaÅ‚ 'nauczanie problemowe'?", a: ["W. OkoÅ„.", "B. Suchodolski.", "A. KamiÅ„ski."], ok: 0 },
    { q: "Czym jest socjalizacja?", a: ["Procesem stawania siÄ™ czÅ‚onkiem spoÅ‚eczeÅ„stwa.", "ImprezÄ….", "NaukÄ… matematyki."], ok: 0 },
    { q: "Kto to byÅ‚ Johann Heinrich Pestalozzi?", a: ["Szwajcarski pedagog.", "Francuski krÃ³l.", "Niemiecki fizyk."], ok: 0 },
    { q: "Co to jest 'czarna pedagogika'?", a: ["Wychowanie przez przemoc i strach.", "Wychowanie sportowe.", "Nauka w nocy."], ok: 0 },
    { q: "Kto stworzyÅ‚ system prewencyjny?", a: ["Jan Bosko.", "Ignacy Loyola.", "Filip Neri."], ok: 0 },
    { q: "Co to jest 'ukryty program'?", a: ["Tajne lekcje.", "NieÅ›wiadomie przekazywane normy.", "Wirus komputerowy."], ok: 1 },
    { q: "Czym zajmuje siÄ™ pedagogika pracy?", a: ["Przygotowaniem do zawodu.", "PracÄ… w polu.", "Odpoczynkiem."], ok: 0 },
    { q: "Kto to byÅ‚ Celestyn Freinet?", a: ["TwÃ³rca technik drukarskich w szkole.", "Malarz.", "Muzyk."], ok: 0 },
    { q: "Co to jest wychowanie?", a: ["Karmienie.", "Åšwiadome ksztaÅ‚towanie osobowoÅ›ci.", "Zabawa."], ok: 1 },
    { q: "Czym jest empiryzm?", a: ["WiarÄ… w sny.", "NaukÄ… przez doÅ›wiadczenie.", "WiarÄ… w magiÄ™."], ok: 1 },
    { q: "Kto napisaÅ‚ 'Jak kochaÄ‡ dziecko'?", a: ["Korczak.", "Makarenko.", "Neill."], ok: 0 },
    { q: "Co to jest autorytaryzm?", a: ["Demokracja.", "RzÄ…dy silnej rÄ™ki i bezwzglÄ™dne posÅ‚uszeÅ„stwo.", "WolnoÅ›Ä‡."], ok: 1 },
    { q: "Czym jest altruizm?", a: ["Egoizmem.", "BezinteresownÄ… pomocÄ… innym.", "NaukÄ… o gwiazdach."], ok: 1 },
    { q: "Kto to byÅ‚ Jan WÅ‚adysÅ‚aw Dawid?", a: ["Polski psycholog i pedagog.", "Pisarz.", "Polityk."], ok: 0 },
    { q: "Co to jest empiriocentryzm?", a: ["Stawianie doÅ›wiadczenia w centrum.", "Stawianie Boga w centrum.", "Brak nauki."], ok: 0 },
    { q: "Czym jest behawioryzm?", a: ["NaukÄ… o duszy.", "NaukÄ… o zachowaniu.", "NaukÄ… o kosmosie."], ok: 1 },
    { q: "Kto to byÅ‚ Aleksander KamiÅ„ski?", a: ["Autor 'Kamieni na szaniec' i pedagog.", "Lekarz.", "Sportowiec."], ok: 0 },
    { q: "Co to jest konformizm?", a: ["Bunt.", "Uleganie wpÅ‚ywom grupy.", "SamodzielnoÅ›Ä‡."], ok: 1 },
    { q: "Czym zajmuje siÄ™ pedagogika medialna?", a: ["WpÅ‚ywem mediÃ³w na wychowanie.", "NaprawÄ… telewizorÃ³w.", "Radiem."], ok: 0 },
    { q: "Kto to byÅ‚ Maria Grzegorzewska?", a: ["TwÃ³rczyni pedagogiki specjalnej w Polsce.", "Piosenkarka.", "Aktorka."], ok: 0 },
    { q: "Co to jest asertywnoÅ›Ä‡?", a: ["Agresja.", "UmiejÄ™tnoÅ›Ä‡ wyraÅ¼ania siebie z szacunkiem.", "UlegÅ‚oÅ›Ä‡."], ok: 1 },
    { q: "Czym zajmuje siÄ™ pedagogika zdrowia?", a: ["Promowaniem zdrowego stylu Å¼ycia.", "Leczeniem chorÃ³b.", "BudowÄ… szpitali."], ok: 0 },
    { q: "Kto to byÅ‚ Bogdan Suchodolski?", a: ["Wybitny polski pedagog i filozof.", "PiÅ‚karz.", "Pianista."], ok: 0 },
    { q: "Co to jest kreatywnoÅ›Ä‡?", a: ["Nuda.", "ZdolnoÅ›Ä‡ tworzenia czegoÅ› nowego.", "NaÅ›ladownictwo."], ok: 1 },
    { q: "Czym zajmuje siÄ™ pedagogika leÅ›na?", a: ["NaukÄ… w kontakcie z naturÄ….", "Åšcinaniem drzew.", "Polowaniem."], ok: 0 },
    { q: "Kto to byÅ‚ Stefan Szuman?", a: ["Pedagog zajmujÄ…cy siÄ™ estetykÄ… i rozwojem.", "Kierowca.", "InÅ¼ynier."], ok: 0 },
    { q: "Co to jest tolerancja?", a: ["NienawiÅ›Ä‡.", "Szacunek dla odmiennoÅ›ci.", "Ignorancja."], ok: 1 },
    { q: "Czym zajmuje siÄ™ pedagogika zabawy?", a: ["Wykorzystaniem gier w edukacji.", "ProdukcjÄ… zabawek.", "Bieganiem."], ok: 0 }
];

        // --- MUZYKA & NAWIGACJA ---
// Deklaracja zmiennej na samej gÃ³rze skryptu (poza funkcjami)
let currentMusic = null; 

function playMusic(n, btn) {
    // 1. Zatrzymaj aktualnie grajÄ…cy utwÃ³r, jeÅ›li istnieje
    if (currentMusic) {
        currentMusic.pause();
        currentMusic.currentTime = 0;
    }

    // 2. Pobierz nowy utwÃ³r na podstawie ID (bgm1 lub bgm2)
    currentMusic = document.getElementById('bgm' + n);

    if (currentMusic) {
        // UsuÅ„ klasÄ™ aktywnoÅ›ci ze wszystkich przyciskÃ³w w panelu
        document.querySelectorAll('.music-panel button').forEach(b => b.classList.remove('active-music'));
        
        // SprÃ³buj odtworzyÄ‡ dÅºwiÄ™k
        currentMusic.play().catch(error => {
            console.log("Autoodtwarzanie zablokowane przez przeglÄ…darkÄ™.");
        });

        // Dodaj podÅ›wietlenie do klikniÄ™tego przycisku
        btn.classList.add('active-music');
    }
}

// TEJ FUNKCJI BRAKOWAÅO (to ona powoduje bÅ‚Ä…d w konsoli):
function stopMusic() {
    if (currentMusic) {
        currentMusic.pause();
        currentMusic.currentTime = 0;
    }
    // UsuÅ„ podÅ›wietlenie z przyciskÃ³w po zatrzymaniu
    document.querySelectorAll('.music-panel button').forEach(b => b.classList.remove('active-music'));
}
 

        // --- FAZA 1 ---
        let rCount = 0;
        function nextReason() {
            const txt = allReasons[rCount % allReasons.length];
            document.getElementById('reason-text').innerText = txt;
            rCount++;
            document.getElementById('reason-counter').innerText = Math.min(rCount, 6);
            if(rCount >= 6) document.getElementById('btn-start').classList.remove('hidden');
        }

        function unlockTL(n) {
            document.getElementById('tl-'+(n-1)).querySelector('button').disabled = true;
            document.getElementById('tl-'+(n-1)).querySelector('button').innerText = "âœ“";
            let next = document.getElementById('tl-'+n);
            next.classList.remove('hidden'); next.classList.add('active');
            next.querySelector('button').disabled = false;
            next.scrollIntoView({behavior:'smooth'});
        }

        let refuseCount = 0;
        function refusePromise() {
            document.getElementById('refuse-gif').classList.remove('hidden');
            refuseCount++;
            let scale = 1 + (refuseCount * 0.2);
            document.getElementById('btn-promise').style.transform = `scale(${scale})`;
        }

        // --- MANAGER GIER ---
        let unlockedFinal = false;
        function backToMenu() {
            stopCatcher();
            document.getElementById('game-menu').classList.remove('hidden');
            ['memory','catcher','wordle','slots','pedagogy'].forEach(g => document.getElementById('game-'+g).classList.add('hidden'));
            if(unlockedFinal) {
                document.getElementById('unlock-msg').classList.remove('hidden');
                document.getElementById('btn-final').classList.remove('hidden');
            }
        }
        function startGame(type) {
            document.getElementById('game-menu').classList.add('hidden');
            document.getElementById('game-'+type).classList.remove('hidden');
            if(type === 'memory') { document.getElementById('mem-levels').classList.remove('hidden'); document.getElementById('mem-game-area').classList.add('hidden'); }
            if(type === 'catcher') initCatcher();
            if(type === 'wordle') initWordle();
            if(type === 'pedagogy') { document.getElementById('ped-level-select').classList.remove('hidden'); document.getElementById('ped-game-area').classList.add('hidden'); }
        }
        // --- LOGIKA WYGRANYCH ---
        let wonGames = new Set(); // Set przechowuje unikalne wygrane gry

        function gameCompleted(gameId) {
            wonGames.add(gameId); // Dodajemy id gry do zbioru zwyciÄ™stw
            document.getElementById('s-' + gameId).innerText = "âœ…";
            
            const msg = document.getElementById('unlock-msg');
            
            if (wonGames.size === 1) {
                msg.innerHTML = "ğŸ‰ Pierwsza gra zaliczona! Jeszcze tylko jedna! (1/2)";
                msg.classList.remove('hidden');
            } else if (wonGames.size >= 2) {
                unlockedFinal = true;
                msg.innerHTML = "ğŸ‰ Brawo! OdblokowaÅ‚aÅ› finaÅ‚! (2/2)<br>MoÅ¼esz graÄ‡ dalej lub odebraÄ‡ nagrodÄ™.";
                document.getElementById('btn-final').classList.remove('hidden');
                msg.classList.remove('hidden');
            }

            setTimeout(() => { 
                alert("Zadanie zaliczone! ğŸ‰"); 
                backToMenu(); 
            }, 500);
        }
        // --- GRA 1: MEMORY ---
        const memImages = ['zdjecie1.jpg', 'zdjecie2.jpg', 'mem3.jpg', 'mem4.jpg', 'mem5.jpg', 'mem6.jpg'];
        let hasFlipped = false, lock = false, first, second, matches = 0, totalMatches = 0;
        function setupMemory(level) {
            document.getElementById('mem-levels').classList.add('hidden');
            document.getElementById('mem-game-area').classList.remove('hidden');
            const board = document.getElementById('mem-board'); board.innerHTML = ''; board.className = 'memory-grid'; matches = 0;
            let cards = [];
            if(level === 'easy') { totalMatches = 3; let s = memImages.slice(0, 3); cards = [...s, ...s]; board.classList.add('grid-easy'); } 
            else { totalMatches = 6; cards = [...memImages, ...memImages]; board.classList.add('grid-hard'); }
            cards.sort(() => 0.5 - Math.random());
            cards.forEach(img => {
                let div = document.createElement('div'); div.className = 'memory-card';
                div.innerHTML = `<div class="front">â¤ï¸</div><div class="back"><img src="${img}"></div>`;
                div.onclick = function() { flipCard(this) };
                board.appendChild(div);
            });
        }
        function flipCard(card) {
            if(lock || card === first || card.classList.contains('flipped')) return;
            card.classList.add('flipped');
            if(!hasFlipped) { hasFlipped=true; first=card; return; }
            second = card; checkMatch();
        }
        function checkMatch() {
            let isMatch = first.querySelector('img').src === second.querySelector('img').src;
            isMatch ? disableCards() : unflipCards();
        }
        function disableCards() { matches++; resetBoard(); if(matches === totalMatches) gameCompleted('memory'); }
        function unflipCards() { lock = true; setTimeout(() => { first.classList.remove('flipped'); second.classList.remove('flipped'); resetBoard(); }, 1000); }
        function resetBoard() { [hasFlipped, lock] = [false, false]; [first, second] = [null, null]; }

        // --- GRA 2: CATCHER ---
        let basketX = 50, score = 0, gameInterval, spawnInterval, fallSpeed = 5, basketSize = 90;
        function initCatcher() {
            score = 0; document.getElementById('score').innerText = 0;
            basketX = 50; updateBasket(); fallSpeed = 5; basketSize = 90; updateBasketStyle();
            document.getElementById('skill-magnet').disabled = false; document.getElementById('skill-freeze').disabled = false;
            document.querySelectorAll('.falling-item').forEach(e => e.remove());
            spawnInterval = setInterval(spawnItem, 1000); gameInterval = setInterval(gameLoop, 50);
        }
        function stopCatcher() { clearInterval(spawnInterval); clearInterval(gameInterval); }
        function updateBasket() { document.getElementById('basket').style.left = basketX + '%'; }
        function updateBasketStyle() { document.getElementById('basket').style.width = basketSize + 'px'; }
        function moveBasket(dir) { basketX += dir * 10; if(basketX < 5) basketX = 5; if(basketX > 95) basketX = 95; updateBasket(); }
        function activateMagnet() { basketSize = 160; updateBasketStyle(); const btn = document.getElementById('skill-magnet'); btn.disabled = true; setTimeout(() => { basketSize = 90; updateBasketStyle(); setTimeout(() => { btn.disabled = false; }, 10000); }, 5000); }
        function activateFreeze() { fallSpeed = 2; const btn = document.getElementById('skill-freeze'); btn.disabled = true; setTimeout(() => { fallSpeed = 5; setTimeout(() => { btn.disabled = false; }, 10000); }, 5000); }
        function spawnItem() {
            let item = document.createElement('div'); item.className = 'falling-item';
            let isGood = Math.random() > 0.35; item.innerText = isGood ? 'â¤ï¸' : 'ğŸ’£'; item.dataset.type = isGood ? 'good' : 'bad';
            item.style.left = Math.random() * 90 + '%'; item.style.top = '0px';
            document.getElementById('catcher-area').appendChild(item);
        }
        function gameLoop() {
            document.querySelectorAll('.falling-item').forEach(item => {
                let top = parseInt(item.style.top || 0); item.style.top = (top + fallSpeed) + 'px';
                if(top > 310 && top < 350) {
                    let diff = Math.abs(parseInt(item.style.left) - basketX);
                    let rng = (basketSize / document.getElementById('catcher-area').offsetWidth) * 100 / 1.5;
                    if(diff < rng) {
                        if(item.dataset.type === 'good') score++; else { score -= 2; document.getElementById('catcher-area').style.backgroundColor = 'red'; setTimeout(()=>document.getElementById('catcher-area').style.backgroundColor='#222', 200); }
                        item.remove(); if(score < 0) score = 0; document.getElementById('score').innerText = score;
                        if(score >= 10) { stopCatcher(); gameCompleted('catcher'); } return;
                    }
                }
                if(top > 350) { if(item.dataset.type === 'good') { score--; if(score < 0) score = 0; document.getElementById('score').innerText = score; } item.remove(); }
            });
        }

        // --- GRA 3: WORDLE (ZMODYFIKOWANA - Z WALIDACJÄ„ I OBSÅUGÄ„ KLAWIATURY FIZYCZNEJ) ---
        let currentAttempt = 0;
        const maxAttempts = 6;
        function initWordle() {
            currentWordleTarget = wordleTargets[Math.floor(Math.random() * wordleTargets.length)];
            currentGuess = ""; currentAttempt = 0;
            const c = document.getElementById('wordle-container'); c.innerHTML = '';
            document.getElementById('wordle-restart').classList.add('hidden');
            document.getElementById('wordle-msg').innerText = "";
            for (let i = 0; i < maxAttempts; i++) {
                let r = document.createElement('div'); r.className = 'w-row'; r.id = `attempt-${i}`;
                for (let j = 0; j < 5; j++) { let b = document.createElement('div'); b.className = 'w-box'; r.appendChild(b); }
                c.appendChild(r);
            }
            renderKeyboard();
        }
       function renderKeyboard() {
    const kb = document.getElementById('wordle-keyboard'); 
    kb.innerHTML = '';
    // Dodano czwarty rzÄ…d z polskimi znakami
    const rows = ["QWERTYUIOP", "ASDFGHJKL", "ZXCVBNM", "Ä„Ä†Ä˜ÅÅƒÃ“ÅšÅ¹Å»"]; 
    
    rows.forEach((rs, idx) => {
        let rd = document.createElement('div'); 
        rd.className = 'kb-row';
        
        // Dodajemy Enter (âœ“) na poczÄ…tku ostatniego rzÄ™du
        if(idx === 3) { 
            let e = document.createElement('div'); 
            e.className = 'kb-key kb-wide'; 
            e.innerText = 'âœ“'; 
            e.onclick = checkWordle; 
            rd.appendChild(e); 
        }
        
        for(let char of rs) { 
            let k = document.createElement('div'); 
            k.className = 'kb-key'; 
            k.innerText = char; 
            k.onclick = () => typeLetter(char); 
            rd.appendChild(k); 
        }
        
        // Dodajemy Backspace (âŒ«) na koÅ„cu ostatniego rzÄ™du
        if(idx === 3) { 
            let b = document.createElement('div'); 
            b.className = 'kb-key kb-wide'; 
            b.innerText = 'âŒ«'; 
            b.onclick = deleteLetter; 
            rd.appendChild(b); 
        }
        kb.appendChild(rd);
    });
}
        
        // ObsÅ‚uga klawiatury fizycznej
        document.addEventListener('keydown', (e) => {
            if(document.getElementById('game-wordle').classList.contains('hidden')) return;
            const key = e.key.toUpperCase();
            if (key === 'ENTER') {
                checkWordle();
            } else if (key === 'BACKSPACE') {
                deleteLetter();
            } else if (key.length === 1 && /^[A-ZÄ„Ä†Ä˜ÅÅƒÃ“ÅšÅ¹Å»]$/.test(key)) {
                typeLetter(key);
            }
        });

        function typeLetter(l) { if(currentGuess.length < 5) { currentGuess += l; updateGrid(); } }
        function deleteLetter() { if(currentGuess.length > 0) { currentGuess = currentGuess.slice(0, -1); updateGrid(); } }
        function updateGrid() {
            let row = document.getElementById(`attempt-${currentAttempt}`);
            let boxes = row.querySelectorAll('.w-box');
            for(let i=0; i<5; i++) boxes[i].innerText = currentGuess[i] || "";
        }
        function checkWordle() {
            const msg = document.getElementById('wordle-msg'); msg.innerText = "";
            if(currentGuess.length !== 5) { msg.innerText = "Za krÃ³tkie!"; return; }
            if(!validWords.includes(currentGuess)) { msg.innerText = "Nie ma takiego sÅ‚owa!"; return; }

            const target = currentWordleTarget.toUpperCase();
            const row = document.getElementById(`attempt-${currentAttempt}`);
            const boxes = row.querySelectorAll('.w-box');
            let correctCount = 0;
            for (let i = 0; i < 5; i++) {
                if (currentGuess[i] === currentWordleTarget[i]) { boxes[i].classList.add('w-correct'); correctCount++; }
                else if (currentWordleTarget.includes(currentGuess[i])) { boxes[i].classList.add('w-present'); }
                else { boxes[i].classList.add('w-absent'); }
            }
            if (correctCount === 5) { wordleHeartRain(); document.getElementById('wordle-restart').classList.remove('hidden'); gameCompleted('wordle'); }
            else {
                currentAttempt++; currentGuess = "";
                if (currentAttempt >= maxAttempts) { alert("HasÅ‚o to: " + currentWordleTarget); document.getElementById('wordle-restart').classList.remove('hidden'); }
            }
        }

        // --- GRA 4: SLOTS ---
        const slotSymbols = ['â¤ï¸', 'ğŸ’', 'ğŸ’', '7', 'ğŸ’', 'ğŸ”¥'];
        function spinSlots() {
            const btn = document.getElementById('spin-btn'); const msg = document.getElementById('slot-msg');
            btn.disabled = true; msg.innerText = "";
            let s1 = document.getElementById('slot1'), s2 = document.getElementById('slot2'), s3 = document.getElementById('slot3');
            s1.classList.add('spin-anim'); s2.classList.add('spin-anim'); s3.classList.add('spin-anim');
            let r1, r2, r3;
            if(Math.random() > 0.5) { r1 = 'â¤ï¸'; r2 = 'â¤ï¸'; r3 = 'â¤ï¸'; } 
            else { r1 = slotSymbols[Math.floor(Math.random()*6)]; r2 = slotSymbols[Math.floor(Math.random()*6)]; r3 = slotSymbols[Math.floor(Math.random()*6)]; }
            setTimeout(() => { s1.innerText = r1; s1.classList.remove('spin-anim'); }, 1000);
            setTimeout(() => { s2.innerText = r2; s2.classList.remove('spin-anim'); }, 1500);
            setTimeout(() => { 
                s3.innerText = r3; s3.classList.remove('spin-anim'); btn.disabled = false;
                if(r1 === 'â¤ï¸' && r2 === 'â¤ï¸' && r3 === 'â¤ï¸') { msg.innerText = "JACKPOT!!! KOCHAM CIÄ˜!"; msg.style.color = "red"; gameCompleted('slots'); } else { msg.innerText = "SprÃ³buj jeszcze raz!"; }
            }, 2000);
        }

        // --- GRA 5: PEDAGOGY (ZMODYFIKOWANA - FEEDBACK & LOSOWANIE) ---
      function startPedGame(level) {
    document.getElementById('ped-level-select').classList.add('hidden');
    document.getElementById('ped-game-area').classList.remove('hidden');
    currentPedIndex = 0; correctPedAnswers = 0; pedLocked = false;
    
    let pool = (level === 'easy') ? pedQuestionsEasy : pedQuestionsHard;
    let questionsCount = (level === 'hard') ? 15 : 8;
    pedGoal = (level === 'hard') ? 12 : 6;
    
    currentPedQuestions = [...pool].sort(() => 0.5 - Math.random()).slice(0, questionsCount); 
    document.querySelector('.ped-score').innerHTML = `Pytanie: <span id="ped-q-num">1</span> / ${questionsCount}`;
    loadPedQuestion();
}

function loadPedQuestion() {
    if(currentPedIndex >= currentPedQuestions.length) {
        if(correctPedAnswers >= pedGoal) gameCompleted('pedagogy');
        else { alert(`Wynik: ${correctPedAnswers}. Potrzeba ${pedGoal}. SprÃ³buj ponownie!`); backToMenu(); }
        return;
    }
    pedLocked = false;
    const qData = currentPedQuestions[currentPedIndex];
    document.getElementById('ped-q-num').innerText = currentPedIndex + 1;
    document.getElementById('ped-question-text').innerText = qData.q;
    const opts = document.getElementById('ped-options');
    opts.innerHTML = '';
    qData.a.forEach((txt, idx) => {
        let b = document.createElement('button');
        b.className = 'ped-btn';
        b.innerText = txt;
        b.onclick = () => answerPed(b, idx === qData.ok, qData.ok);
        opts.appendChild(b);
    });
}

function answerPed(btn, isCorrect, correctIdx) {
    if(pedLocked) return;
    pedLocked = true;
    if(isCorrect) { btn.classList.add('ped-correct'); correctPedAnswers++; }
    else { btn.classList.add('ped-wrong'); document.querySelectorAll('.ped-btn')[correctIdx].classList.add('ped-correct'); }
    setTimeout(() => { currentPedIndex++; loadPedQuestion(); }, 1200);
}



    
        // --- FINAÅ ---
        function checkFinal() {
            if(document.getElementById('final-answer').value.toLowerCase().includes(correctFinalAnswer)) changePhase(5);
            else alert("PudÅ‚o!");
        }
        function startConfetti() {
            for(let i=0; i<50; i++) {
                let c = document.createElement('div'); c.className='confetti';
                c.style.background = Math.random()>0.5?'gold':'hotpink';
                c.style.left = Math.random()*100+'vw';
                c.style.animation = `pop ${Math.random()*2+2}s infinite`;
                document.body.appendChild(c);
            }
        }
        function wordleHeartRain() {
    for(let i=0; i<30; i++) {
        setTimeout(() => {
            const heart = document.createElement('div');
            heart.className = 'falling-heart';
            heart.innerHTML = 'â¤ï¸';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = (Math.random() * 20 + 20) + 'px';
            heart.style.duration = (Math.random() * 2 + 3) + 's';
            heart.style.animationDuration = heart.style.duration;
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 5000);
        }, i * 100);
    }
}

// Zmodyfikowana funkcja changePhase, Å¼eby obsÅ‚ugiwaÅ‚a nazwy (stringi)
function changePhase(n) {
    // 1. Ukrywamy wszystkie sekcje, ktÃ³re zaczynajÄ… siÄ™ od "phase-"
    document.querySelectorAll('.container > div').forEach(div => {
        if(div.id && div.id.startsWith('phase-')) {
            div.classList.add('hidden');
        }
    });

    // 2. Budujemy ID celu (obsÅ‚uguje np. 4 -> "phase-4" oraz "match" -> "phase-match")
    const targetId = (typeof n === 'string' && !n.startsWith('phase-')) ? 'phase-' + n : 'phase-' + n;
    const targetElement = document.getElementById(targetId);

    // 3. Pokazujemy wybranÄ… sekcjÄ™
    if (targetElement) {
        targetElement.classList.remove('hidden');
    }

    // 4. Przewijamy na gÃ³rÄ™ strony
    window.scrollTo(0, 0);

    // --- LOGIKA SPECJALNA DLA KONKRETNYCH FAZ ---

    // JeÅ›li wchodzimy do SEJFU (Faza 4), musimy go zresetowaÄ‡ i uruchomiÄ‡
    if (n == 4 || n == '4') {
        if (typeof startSafeQuiz === "function") {
            startSafeQuiz(); 
        }
    }

    // JeÅ›li wchodzimy do LISTU (Faza 5), odpalamy konfetti
    if (n == 5 || n == '5') {
        if (typeof startConfetti === "function") {
            startConfetti();
        }
    }
}

function runMatch() {
    const bar = document.getElementById('match-bar');
    const resText = document.getElementById('match-result');
    const msg = document.getElementById('match-msg');
    const btnCalc = document.getElementById('btn-calc');
    const btnRetry = document.getElementById('btn-retry-match');
    const btnFinal = document.getElementById('btn-to-final');

    // Reset
    bar.style.width = '0%';
    resText.innerText = '0%';
    msg.innerText = 'Analizowanie charakterÃ³w...';
    btnCalc.classList.add('hidden');
    btnRetry.classList.add('hidden');

    // Losujemy 99 lub 100
    const score = Math.random() > 0.5 ? 100 : 99;

    setTimeout(() => {
        bar.style.width = score + '%';
        
        // Animacja cyferek
        let count = 0;
        let counter = setInterval(() => {
            count++;
            resText.innerText = count + '%';
            if(count >= score) {
                clearInterval(counter);
                showMatchFinal(score);
            }
        }, 20);
    }, 500);
}

function showMatchFinal(score) {
    const msg = document.getElementById('match-msg');
    const btnRetry = document.getElementById('btn-retry-match');
    const btnFinal = document.getElementById('btn-to-final');

    if(score === 100) {
        msg.innerHTML = "âœ¨ IDEAÅ! JesteÅ›my dla siebie stworzeni! â¤ï¸";
        msg.style.color = "green";
        btnFinal.classList.remove('hidden');
        btnRetry.classList.add('hidden');
    } else {
        msg.innerHTML = "âš ï¸ BLISKO! Brakuje 1%... Aby dobiÄ‡ do 100%, musisz wysÅ‚aÄ‡ mi teraz swoje zdjÄ™cie na Messengerze! ğŸ˜";
        msg.style.color = "var(--red)";
        btnRetry.classList.remove('hidden'); // Dajemy szansÄ™ na "ponownie", aÅ¼ wylosuje 100
    }
}

        // --- KONFIGURACJA PYTAÅƒ OTWARTYCH ---
const safeQuestions = [
    { q: "Kiedy oficjalnie zaczÄ™liÅ›my byÄ‡ razem? UÅ¼yj kropek", key: "16.05.2025", hint: "DzieÅ„ +2 do twoich urodzin, - 2 do moich urodzin, MiesiÄ…c: MAJ Rok: zeszÅ‚y" },
    { q: "Kto pierwszy napisaÅ‚?", key: ["On","Ty"], hint: "Nie ma podpowiedzi" },
    { q: "Gdzie pojechaliÅ›my w wakacje??", key: "GdaÅ„sk", hint: "Nazwa miasta nad morzem" },
    { q: "Gdzie byÅ‚ nasz pierwszy pocaÅ‚unek", key: "PiÅ‚a", hint: "Miasto" },
    { q: "Jak mam zapisanÄ… WiktoriÄ™ w telefonie?", key: "BrzdÄ…c", hint: "MESS" },
    { q: "Co najbardziej lubisz w McDonaldâ€™s?", key: "frytki", hint: "Zawsze podjadasz najpierw to." },
    { q: "Ile kilometrÃ³w nas dzieli? (wpisz cyfrÄ™)", key: "89", hint: "Sprawdz na nawigacji" },
    { q: "Czy obiecujesz robiÄ‡ ze mnÄ… wiÄ™cej zdjÄ™Ä‡?", key: "tak", hint: "To jedyna sÅ‚uszna odpowiedÅº! â¤ï¸" }
];

let currentSafeIndex = 0;

function startSafeQuiz() {
    currentSafeIndex = 0;
    document.getElementById('safe-quiz-container').classList.remove('hidden');
    document.getElementById('safe-opened').classList.add('hidden');
    loadSafeQuestion();
}

function loadSafeQuestion() {
    if (currentSafeIndex >= safeQuestions.length) {
        document.getElementById('safe-quiz-container').classList.add('hidden');
        document.getElementById('safe-opened').classList.remove('hidden');
        return;
    }

    const qData = safeQuestions[currentSafeIndex];
    document.getElementById('safe-q-num').innerText = currentSafeIndex + 1;
    document.getElementById('safe-question-text').innerText = qData.q;
    document.getElementById('safe-answer-input').value = "";
    document.getElementById('safe-hint-text').classList.add('hidden'); // Ukrywamy podpowiedÅº przy nowym pytaniu
}

function showSafeHint() {
    const hintText = document.getElementById('safe-hint-text');
    hintText.innerText = "PodpowiedÅº: " + safeQuestions[currentSafeIndex].hint;
    hintText.classList.remove('hidden');
}


function checkSafeAnswer() {
    const userInput = document.getElementById('safe-answer-input').value.toLowerCase().trim();
    const qData = safeQuestions[currentSafeIndex];
    
    let isCorrect = false;
    // JeÅ›li klucz to tablica (np. ["on", "ty"])
    if (Array.isArray(qData.key)) {
        isCorrect = qData.key.some(k => userInput.includes(k.toLowerCase()));
    } else {
        // JeÅ›li klucz to zwykÅ‚y tekst
        isCorrect = userInput.includes(qData.key.toLowerCase());
    }

    if (isCorrect) {
        currentSafeIndex++;
        if (currentSafeIndex < safeQuestions.length) {
            alert("Brawo! NastÄ™pne pytanie... â¤ï¸");
            loadSafeQuestion();
        } else {
            document.getElementById('safe-quiz-container').classList.add('hidden');
            document.getElementById('safe-opened').classList.remove('hidden');
        }
    } else {
        alert("To nie to... SprÃ³buj jeszcze raz albo kliknij w serduszko â¤ï¸");
    }
}
function sendVirtualKiss() {
    // 1. OdtwÃ³rz dÅºwiÄ™k (jeÅ›li masz plik kiss.mp3, odkomentuj te linie)
    /*
    const kissSound = new Audio('kiss.mp3');
    kissSound.volume = 0.5;
    kissSound.play().catch(e => console.log("Brak dÅºwiÄ™ku caÅ‚usa"));
    */

    // 2. PokaÅ¼ warstwÄ™ finaÅ‚owÄ…
    const overlay = document.getElementById('grand-finale-overlay');
    overlay.classList.remove('hidden');

    // 3. Dodatkowo puÅ›Ä‡ deszcz serc (uÅ¼ywamy istniejÄ…cej funkcji)
    if (typeof wordleHeartRain === 'function') {
        wordleHeartRain();
    }
    
    // 4. Opcjonalnie: jeszcze wiÄ™cej konfetti!
    if (typeof startConfetti === 'function') {
        startConfetti();
    }

    // (Opcjonalnie) Po 8 sekundach pokaÅ¼ alert koÅ„cowy
    setTimeout(() => {
        alert("Kocham CiÄ™! Do zobaczenia niedÅ‚ugo! â¤ï¸ğŸŒ¹");
    }, 8000);
}

    </script>
</body>
</html>